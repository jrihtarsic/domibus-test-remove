<!--
  ~ Copyright 2015 e-CODEX Project
  ~
  ~ Licensed under the EUPL, Version 1.1 or â€“ as soon they
  ~ will be approved by the European Commission - subsequent
  ~ versions of the EUPL (the "Licence");
  ~ You may not use this work except in compliance with the
  ~ Licence.
  ~ You may obtain a copy of the Licence at:
  ~ http://ec.europa.eu/idabc/eupl5
  ~ Unless required by applicable law or agreed to in
  ~ writing, software distributed under the Licence is
  ~ distributed on an "AS IS" basis,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either
  ~ express or implied.
  ~ See the Licence for the specific language governing
  ~ permissions and limitations under the Licence.
  -->

<assembly
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
        xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
    <id>tomcat-full</id>
    <formats>
        <format>zip</format>
    </formats>
    <includeBaseDirectory>true</includeBaseDirectory>
    <baseDirectory></baseDirectory>
    <includeSiteDirectory>false</includeSiteDirectory>
    <fileSets>
        <fileSet>
            <directory>${project.build.directory}/sql-scripts</directory>
            <useDefaultExcludes>true</useDefaultExcludes>
            <outputDirectory>sql-scripts</outputDirectory>
            <includes>
                <include>*.ddl</include>
            </includes>
            <!-- excludes/-->
            <fileMode>0444</fileMode>
            <directoryMode>0555</directoryMode>
            <!-- directory/-->
            <lineEnding>unix</lineEnding>
            <filtered>false</filtered>
        </fileSet>
        <fileSet>
            <directory>${project.build.directory}/cargo/installs/tomcat-${tomcat.version}/apache-tomcat-${tomcat.version}</directory>
            <outputDirectory>domibus</outputDirectory>
            <useDefaultExcludes>true</useDefaultExcludes>
            <filtered>false</filtered>
            <excludes>
                <exclude>work</exclude>
                <exclude>temp/**</exclude>
                <exclude>webapps/**/*</exclude>
            </excludes>
        </fileSet>
        <fileSet>
            <directory>${project.basedir}/src/main/conf/domibus</directory>
            <outputDirectory>domibus/conf/domibus</outputDirectory>
            <useDefaultExcludes>true</useDefaultExcludes>
            <filtered>false</filtered>
            <excludes>
                <exclude>example/**</exclude>
                <exclude>policies/**</exclude>
                <exclude>keystores/**</exclude>
                <exclude>keystores_dyn/**</exclude>
                <exclude>plugins/**</exclude>
            </excludes>
        </fileSet>
    </fileSets>

    <files>
        <file>
            <source>${project.build.directory}/${project.artifactId}-${project.version}-${domibus.classifier}.war</source>
            <outputDirectory>domibus/webapps</outputDirectory>
            <destName>domibus.war</destName>
            <filtered>false</filtered>
        </file>
        <file>
            <source>${project.basedir}/changelog.txt</source>
            <outputDirectory>/</outputDirectory>
            <filtered>false</filtered>
        </file>
        <file>
            <source>${project.basedir}/upgrade-info.txt</source>
            <outputDirectory>/</outputDirectory>
            <filtered>false</filtered>
        </file>
        <file>
            <source>${project.basedir}/src/main/conf/domibus/plugins/config/ws-plugin.xml</source>
            <outputDirectory>domibus/conf/domibus/plugins/config</outputDirectory>
            <filtered>false</filtered>
        </file>
        <file>
            <source>${project.basedir}/../Domibus-default-ws-plugin/target/domibus-default-ws-plugin-${project.version}.jar</source>
            <outputDirectory>domibus/conf/domibus/plugins/lib</outputDirectory>
            <filtered>false</filtered>
        </file>
        <!--<file>-->
            <!--<source>${project.basedir}/../Domibus-ActiveMQ-ThroughputLimiter/target/domibus-ActiveMQ-ThroughputLimiter-${project.version}.jar</source>-->
            <!--<outputDirectory>domibus/conf/domibus/plugins/lib</outputDirectory>-->
            <!--<filtered>false</filtered>-->
        <!--</file>-->
        <file>
            <source>${project.basedir}/src/main/conf/domibus/policies/eDeliveryPolicy.xml</source>
            <outputDirectory>domibus/conf/domibus/policies</outputDirectory>
            <filtered>false</filtered>
        </file>
        <file>
            <source>${project.basedir}/src/main/conf/domibus/policies/eDeliveryPolicy_CA.xml</source>
            <outputDirectory>domibus/conf/domibus/policies</outputDirectory>
            <filtered>false</filtered>
        </file>
        <file>
            <source>${project.basedir}/src/main/conf/domibus/policies/eSensPolicy.xml</source>
            <outputDirectory>domibus/conf/domibus/policies</outputDirectory>
            <filtered>false</filtered>
        </file>
        <file>
            <source>${project.basedir}/src/main/conf/domibus/policies/eSensPolicy.v2.0.xml</source>
            <outputDirectory>domibus/conf/domibus/policies</outputDirectory>
            <filtered>false</filtered>
        </file>
        <file>
            <source>${project.basedir}/src/main/conf/domibus/policies/eSensPolicy.v2.0_CA.xml</source>
            <outputDirectory>domibus/conf/domibus/policies</outputDirectory>
            <filtered>false</filtered>
        </file>
        <file>
            <source>${project.basedir}/src/main/assembly/setenv.bat</source>
            <outputDirectory>domibus/bin</outputDirectory>
            <filtered>false</filtered>
        </file>
        <file>
            <source>${project.basedir}/src/main/assembly/setenv.sh</source>
            <outputDirectory>domibus/bin</outputDirectory>
            <filtered>false</filtered>
        </file>
    </files>
</assembly>