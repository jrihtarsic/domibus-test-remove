Domibus 3.2.1:
               - [WebLogic only]
                  o execute the WLST API script 3.2-to-3.2.1-WeblogicSingleServer.properties for single server deployment or 3.2-to-3.2.1-WeblogicCluster.properties for cluster deployment
                  o In the WebLogic console, in the page "Home >Summary of Security Realms >myrealm",  enable the flag "Use Authorization Providers to Protect JMX Access" flag; for more info please check the Administration Guide
                  o In the WebLogic console, in the page "Home >Summary of JDBC Data Sources >cipaeDeliveryDs", tab "Configuration/Connection Pool/Advanced"
                    enable the "Test Connections On Reserve" flag and add "SQL SELECT 1 FROM DUAL" in the "Test Table Name"
               - Replace the war file
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Domibus 3.2 (from 3.1.1):
                Run the appropriate DB migration script.
                Update the configuration file following these steps:
                -  in file "\domibus\conf\domibus\plugins\config\ws-plugin.xml":
                        o   replace
                               <jaxws:endpoint id="backendInterfaceEndpoint" implementor="#backendWebservice" address="/backend">
                               .......
                               </jaxws:endpoint>

                               with

                              <jaxws:endpoint id="backendInterfaceEndpoint" implementor="#backendWebservice" address="/backend">

                                      <jaxws:properties>
                                          <entry key="schema-validation-enabled" value="true"/>
                                          <entry key="mtom-enabled" value="false"/>
                                      </jaxws:properties>

                                      <jaxws:schemaLocations>
                                          <jaxws:schemaLocation>schemas/domibus-header.xsd</jaxws:schemaLocation>
                                          <jaxws:schemaLocation>schemas/domibus-backend.xsd</jaxws:schemaLocation>
                                          <jaxws:schemaLocation>schemas/xml.xsd</jaxws:schemaLocation>
                                          <jaxws:schemaLocation>schemas/xmlmime.xsd</jaxws:schemaLocation>
                                      </jaxws:schemaLocations>
                                      <jaxws:inInterceptors>
                                            <ref bean="customAuthenticationInterceptor"/>
                                      </jaxws:inInterceptors>

                              </jaxws:endpoint>
                -  in file "\domibus\conf\domibus\internal\ehcache.xml":
                        o   add <cache name="certValidationByAlias" maxBytesLocalHeap="5m" timeToLiveSeconds="3600" overflowToDisk="false"/>
                        o   add <cache name="crlByCert" maxBytesLocalHeap="5m" timeToLiveSeconds="3600" overflowToDisk="false"/>
                -  in file "\domibus\conf\domibus\domibus-configuration.xml":
                        o   replace class="eu.domibus.common.dao.CachingPModeProvider"/> by class="eu.domibus.ebms3.common.dao.CachingPModeProvider"/> or by class="eu.domibus.common.dao.PModeDao"/> if you are using Oracle DB
                        o   add <prop key="domibus.certificate.validation.enabled">true</prop>
                        o   add <prop key="domibus.jms.internalQueue.expression">.*domibus\.(internal|DLQ|backend\.jms|notification\.jms|notification\.webservice|notification\.kerkovi).*</prop>
                        o   only for Tomcat users: add <prop key="activeMQ.JMXURL">service:jmx:rmi://localhost:1198/jndi/rmi://localhost:1199/jmxrmi</prop>
                -  in file conf/domibus/domibus-security.xml
                        o   replace all from the comment
                                 <!-- Administration GUI user credentials-->
                                 ...
                             with:
                                <!-- Administration GUI user credentials-->
                                 <bean name="bcryptEncoder"
                                       class="org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder"/>
                                 <sec:authentication-manager>
                                     <sec:authentication-provider ref="allowAllAuthenticationProvider"/>
                                 </sec:authentication-manager>
                                 <sec:authentication-manager id="authenticationManagerForAdminConsole">
                                     <sec:authentication-provider>
                                         <sec:password-encoder ref="bcryptEncoder"/>
                                         <sec:user-service>
                                             <sec:user name="user" password="$2a$10$HApapHvDStTEwjjneMCvxuqUKVyycXZRfXMwjU0rRmaWMsjWQp/Zu"
                                                       authorities="ROLE_USER"/>
                                             <sec:user name="admin" password="$2a$10$5uKS72xK2ArGDgb2CwjYnOzQcOmB7CPxK6fz2MGcDBM9vJ4rUql36"
                                                       authorities="ROLE_USER, ROLE_ADMIN"/>
                                         </sec:user-service>
                                     </sec:authentication-provider>
                                 </sec:authentication-manager>
                                 <sec:global-method-security pre-post-annotations="enabled"/>

                -  [Tomcat only] in file "\domibus\conf\domibus\domibus-datasources.xml":
                        o   replace  <amq:xaConnectionFactory id="xaJmsConnectionFactory" brokerURL="tcp://localhost:61616" userName="domibus" password="changeit"/>    with

                                <amq:xaConnectionFactory id="xaJmsConnectionFactory"
                                                 brokerURL="tcp://localhost:61616"
                                                 userName="domibus" password="changeit">
                                    <!-- do not remove this! otherwise the redeliveryPolicy configured in activemq.xml will be ignored -->
                                    <amq:redeliveryPolicy>
                                        <amq:redeliveryPolicy/>
                                    </amq:redeliveryPolicy>
                                </amq:xaConnectionFactory>

                - [Tomcat only] in file conf/domibus/persistence.xml, add to the <persistence-unit> tag:
                                <class>eu.domibus.plugin.webService.entity.AuthenticationEntry</class>

                If you are using samples keystores, please update them since they are expiring on the 26th of October 2016.
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Domibus 3.2 (from RC1):
                  Run the appropriate DB migration script.
                  Replace domibus.war and the plugin(s) jar(s) into \domibus\conf\domibus\plugins\lib"
                  Update the configuration file following these steps:
                  -   in file "\domibus\conf\domibus\plugins\config\ws-plugin.xml":
                          o   remove <bean id="defaultTransformer" class="eu.domibus.plugin.webService.impl.StubDtoTransformer"/>
                          o   replace
                               <jaxws:endpoint id="backendInterfaceEndpoint" implementor="#backendWebservice" address="/backend">
                               .......
                               </jaxws:endpoint>

                               with

                              <jaxws:endpoint id="backendInterfaceEndpoint" implementor="#backendWebservice" address="/backend">

                                      <jaxws:properties>
                                          <entry key="schema-validation-enabled" value="true"/>
                                          <entry key="mtom-enabled" value="false"/>
                                      </jaxws:properties>

                                      <jaxws:schemaLocations>
                                          <jaxws:schemaLocation>schemas/domibus-header.xsd</jaxws:schemaLocation>
                                          <jaxws:schemaLocation>schemas/domibus-backend.xsd</jaxws:schemaLocation>
                                          <jaxws:schemaLocation>schemas/xml.xsd</jaxws:schemaLocation>
                                          <jaxws:schemaLocation>schemas/xmlmime.xsd</jaxws:schemaLocation>
                                      </jaxws:schemaLocations>

                                      <jaxws:inInterceptors>
                                            <ref bean="customAuthenticationInterceptor"/>
                                      </jaxws:inInterceptors>

                              </jaxws:endpoint>
                  -  in file conf/domibus/internal/ehcache.xml, add
                                            <cache name="crlByCert" 
                                                maxBytesLocalHeap="5m" 
                                                timeToLiveSeconds="3600" 
                                                overflowToDisk="false">
                                             </cache>
                -  in file conf/domibus/domibus-security.xml
                        o   replace all from the comment
                                 <!-- Administration GUI user credentials-->
                                 ...
                             with:
                                <!-- Administration GUI user credentials-->
                                 <bean name="bcryptEncoder"
                                       class="org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder"/>
                                 <sec:authentication-manager>
                                     <sec:authentication-provider ref="allowAllAuthenticationProvider"/>
                                 </sec:authentication-manager>
                                 <sec:authentication-manager id="authenticationManagerForAdminConsole">
                                     <sec:authentication-provider>
                                         <sec:password-encoder ref="bcryptEncoder"/>
                                         <sec:user-service>
                                             <sec:user name="user" password="$2a$10$HApapHvDStTEwjjneMCvxuqUKVyycXZRfXMwjU0rRmaWMsjWQp/Zu"
                                                       authorities="ROLE_USER"/>
                                             <sec:user name="admin" password="$2a$10$5uKS72xK2ArGDgb2CwjYnOzQcOmB7CPxK6fz2MGcDBM9vJ4rUql36"
                                                       authorities="ROLE_USER, ROLE_ADMIN"/>
                                         </sec:user-service>
                                     </sec:authentication-provider>
                                 </sec:authentication-manager>
                                 <sec:global-method-security pre-post-annotations="enabled"/>

                  - [Tomcat only] in file conf/domibus/persistence.xml, add to the <persistence-unit> tag:
                                  <class>eu.domibus.plugin.webService.entity.AuthenticationEntry</class>
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Domibus 3.2 RC1:   Run the appropriate DB migration script.
                    Replace domibus.war and the plugin(s) jar(s) into \domibus\conf\domibus\plugins\lib"
                    For Tomcat installations only, the activemq.xml file has to be replaced and re-configured according to your environment (transportConnector uri, authenticationUser, redeliveryPolicy).
                    Update the configuration file following these steps:
                    -   in file "\domibus\conf\domibus\plugins\config\ws-plugin.xml":
                            o   add <bean id="defaultTransformer" class="eu.domibus.plugin.webService.impl.StubDtoTransformer"/> (as an element in the node beans)
                            o   replace
                                 <jaxws:endpoint id="backendInterfaceEndpoint" implementor="#backendWebservice" address="/backend">
                                 .......
                                 </jaxws:endpoint>

                                 with

                                <jaxws:endpoint id="backendInterfaceEndpoint" implementor="#backendWebservice" address="/backend">

                                    <jaxws:properties>
                                        <entry key="schema-validation-enabled" value="true"/>
                                        <entry key="mtom-enabled" value="true"/>
                                    </jaxws:properties>

                                    <jaxws:schemaLocations>
                                        <jaxws:schemaLocation>schemas/domibus-submission.xsd</jaxws:schemaLocation>
                                        <jaxws:schemaLocation>schemas/xml.xsd</jaxws:schemaLocation>
                                        <jaxws:schemaLocation>schemas/domibus-backend.xsd</jaxws:schemaLocation>
                                        <jaxws:schemaLocation>schemas/xmlmime.xsd</jaxws:schemaLocation>
                                    </jaxws:schemaLocations>

                                </jaxws:endpoint>

                    -   in file "\domibus\conf\domibus\internal\ehcache.xml":
                            o   add <cache name="certValidationByAlias" maxBytesLocalHeap="5m" timeToLiveSeconds="3600" overflowToDisk="false"/>
                    -   in file "\domibus\conf\domibus\domibus-configuration.xml":
                            o   replace class="eu.domibus.common.dao.CachingPModeProvider"/> by class="eu.domibus.ebms3.common.dao.CachingPModeProvider"/> or by class="eu.domibus.common.dao.PModeDao"/> if you are using Oracle DB
                            o   add <prop key="domibus.certificate.validation.enabled">true</prop>
                            o   add <prop key="domibus.jms.internalQueue.expression">.*domibus\.(internal|DLQ|backend\.jms|notification\.jms|notification\.webservice|notification\.kerkovi).*</prop>
                            o   only for Tomcat users: add <prop key="activeMQ.JMXURL">service:jmx:rmi://localhost:1198/jndi/rmi://localhost:1199/jmxrmi</prop>
                    -   only for Tomcat users: in file "\domibus\conf\domibus\domibus-datasources.xml":
                            o   replace  <amq:xaConnectionFactory id="xaJmsConnectionFactory" brokerURL="tcp://localhost:61616" userName="domibus" password="changeit"/>    with

                                    <amq:xaConnectionFactory id="xaJmsConnectionFactory"
                                                     brokerURL="tcp://localhost:61616"
                                                     userName="domibus" password="changeit">
                                        <!-- do not remove this! otherwise the redeliveryPolicy configured in activemq.xml will be ignored -->
                                        <amq:redeliveryPolicy>
                                            <amq:redeliveryPolicy/>
                                        </amq:redeliveryPolicy>
                                    </amq:xaConnectionFactory>

                    If you are using samples keystores, please update them since they are expiring on the 26th of October 2016.

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Domibus 3.1.1:      Replace the war. This release updated the type of one column for the MySQL db. Please run the migration script.
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Domibus 3.1.0:      Re-install the domibus-security.xml and re-configure the properties according with the installed Truststore and Keystore.
                    For Tomcat installations only, the activemq.xml has to be re-installed and re-configured and the domibus-ActiveMQ-ThroughputLimiter jar can be deleted.
                    There have been some changes to the database, please use the new scripts.
                    Run the migration script if you are upgrading from 3.0 to 3.1
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Domibus 3.1 RC2:   Replace the war and jar(plugins) files. There have been some changes to the MessageFilter, please use a clean database.
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Domibus 3.1 RC1:   Domibus 3.1 is a major release that has to be installed from scratch.
                    There have been some changes to the database, please use the new script.
                    There is a new PMode generation plugin available (BETA-3), use this to regenerate your PMode files
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Domibus 3.0 BETA-2: Replace the war file.
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Domibus 3.0 BETA-1: Domibus 3.0 is a major release that has to be installed from scratch. There is no available upgrade path.
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------
