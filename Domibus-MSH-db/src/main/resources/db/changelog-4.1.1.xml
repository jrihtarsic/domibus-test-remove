<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">

    <!-- properties - to be used in column definitions -->
    <property name="now" value="sysdate" dbms="oracle"/>
    <property name="now" value="now()" dbms="mysql"/>

    <!-- sequences -->
    <changeSet dbms="oracle" author="martifp" id="changelog-3.2-delta-1">
        <comment>create sequence</comment>
        <createSequence sequenceName="HIBERNATE_SEQUENCE" minValue="1" maxValue="9999999999999999999999999999"
                        incrementBy="1" startValue="1" cacheSize="20" cycle="false" ordered="false"/>
    </changeSet>

    <!-- Quartz tables -->
    <include file="changelog-4.0-quartz.xml" relativeToChangelogFile="true"/>
    
    <!-- Domibus tables -->
    <changeSet author="Catalin Enache" id="1564477107969-13">
        <comment>create Domibus tables</comment>
        <createTable tableName="TB_ACTION">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_ACTION"/>
            </column>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="VALUE" type="VARCHAR(255)"/>
            <column name="FK_BUSINESSPROCESS" type="BIGINT"/>
        </createTable>

        <createTable tableName="TB_ACTION_AUDIT">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_ACTION_AUDIT"/>
            </column>
            <column name="AUDIT_TYPE" type="VARCHAR(31)">
                <constraints nullable="false"/>
            </column>
            <column name="ENTITY_ID" type="VARCHAR(255)"/>
            <column name="MODIFICATION_TYPE" type="VARCHAR(255)"/>
            <column name="REVISION_DATE" type="TIMESTAMP"/>
            <column name="USER_NAME" type="VARCHAR(255)"/>
            <column name="FROM_QUEUE" type="VARCHAR(255)"/>
            <column name="TO_QUEUE" type="VARCHAR(255)"/>
        </createTable>

        <createTable tableName="TB_AGREEMENT">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_AGREEMENT"/>
            </column>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="TYPE" type="VARCHAR(255)"/>
            <column name="VALUE" type="VARCHAR(255)"/>
            <column name="FK_BUSINESSPROCESS" type="BIGINT"/>
        </createTable>

        <createTable tableName="TB_ALERT">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_ALERT"/>
            </column>
            <column name="ALERT_TYPE" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="ATTEMPTS_NUMBER" type="INT"/>
            <column name="MAX_ATTEMPTS_NUMBER" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="PROCESSED" type="BOOLEAN"/>
            <column name="PROCESSED_TIME" type="TIMESTAMP"/>
            <column name="CREATION_TIME" type="TIMESTAMP"/>
            <column name="REPORTING_TIME" type="TIMESTAMP"/>
            <column name="REPORTING_TIME_FAILURE" type="TIMESTAMP"/>
            <column name="NEXT_ATTEMPT" type="TIMESTAMP"/>
            <column name="ALERT_STATUS" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="ALERT_LEVEL" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="TB_AUTHENTICATION_ENTRY">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_AUTHENTICATION_ENTRY"/>
            </column>
            <column name="CERTIFICATE_ID" type="VARCHAR(255)"/>
            <column name="USERNAME" type="VARCHAR(255)"/>
            <column name="PASSWD" type="VARCHAR(255)"/>
            <column name="AUTH_ROLES" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="ORIGINAL_USER" type="VARCHAR(255)"/>
            <column name="BACKEND" type="VARCHAR(255)"/>
            <column name="PASSWORD_CHANGE_DATE" type="TIMESTAMP"/>
            <column defaultValueBoolean="false" name="DEFAULT_PASSWORD" type="BOOLEAN"/>
            <column defaultValueNumeric="0" name="ATTEMPT_COUNT" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="SUSPENSION_DATE" type="TIMESTAMP"/>
            <column defaultValueBoolean="true" name="USER_ENABLED" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="TB_AUTHENTICATION_ENTRY_AUD">
            <column name="ID_PK" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_AUTHENTICATION_ENTRY_AUD"/>
            </column>
            <column name="REV" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_AUTHENTICATION_ENTRY_AUD"/>
            </column>
            <column name="REVTYPE" type="TINYINT"/>
            <column name="CERTIFICATE_ID" type="VARCHAR(255)"/>
            <column name="CERTIFICATEID_MOD" type="BOOLEAN"/>
            <column name="USERNAME" type="VARCHAR(255)"/>
            <column name="USERNAME_MOD" type="BOOLEAN"/>
            <column name="PASSWD" type="VARCHAR(255)"/>
            <column name="PASSWORD_MOD" type="BOOLEAN"/>
            <column name="AUTH_ROLES" type="VARCHAR(255)"/>
            <column name="AUTHROLES_MOD" type="BOOLEAN"/>
            <column name="ORIGINAL_USER" type="VARCHAR(255)"/>
            <column name="ORIGINALUSER_MOD" type="BOOLEAN"/>
            <column name="BACKEND" type="VARCHAR(255)"/>
            <column name="BACKEND_MOD" type="BOOLEAN"/>
            <column name="USER_ENABLED" type="BOOLEAN"/>
            <column name="ACTIVE_MOD" type="BOOLEAN"/>
            <column name="PASSWORD_CHANGE_DATE" type="TIMESTAMP"/>
            <column name="PASSWORDCHANGEDATE_MOD" type="BOOLEAN"/>
            <column name="DEFAULT_PASSWORD" type="BOOLEAN"/>
            <column name="DEFAULTPASSWORD_MOD" type="BOOLEAN"/>
        </createTable>

        <createTable tableName="TB_BACKEND_FILTER">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_BACKEND_FILTER"/>
            </column>
            <column name="BACKEND_NAME" type="VARCHAR(255)"/>
            <column name="PRIORITY" type="INT"/>
        </createTable>

        <createTable tableName="TB_BACKEND_FILTER_AUD">
            <column name="ID_PK" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_BACKEND_FILTER_AUD"/>
            </column>
            <column name="REV" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_BACKEND_FILTER_AUD"/>
            </column>
            <column name="REVTYPE" type="TINYINT"/>
            <column name="BACKEND_NAME" type="VARCHAR(255)"/>
            <column name="BACKENDNAME_MOD" type="BOOLEAN"/>
            <column name="PRIORITY" type="INT"/>
            <column name="INDEX_MOD" type="BOOLEAN"/>
            <column name="ROUTINGCRITERIAS_MOD" type="BOOLEAN"/>
        </createTable>

        <createTable tableName="TB_BACK_RCRITERIA_AUD">
            <column name="ID_PK" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_BACK_RCRITERIA_AUD"/>
            </column>
            <column name="REV" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_BACK_RCRITERIA_AUD"/>
            </column>
            <column name="REVTYPE" type="TINYINT"/>
            <column name="FK_BACKEND_FILTER" type="BIGINT"/>
            <column name="PRIORITY" type="INT"/>
        </createTable>

        <createTable tableName="TB_BUSINESS_PROCESS">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_BUSINESS_PROCESS"/>
            </column>
        </createTable>

        <createTable tableName="TB_CERTIFICATE">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_CERTIFICATE"/>
            </column>
            <column name="CERTIFICATE_ALIAS" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="NOT_VALID_BEFORE_DATE" type="TIMESTAMP"/>
            <column name="NOT_VALID_AFTER_DATE" type="TIMESTAMP"/>
            <column name="REVOKE_NOTIFICATION_DATE" type="TIMESTAMP"/>
            <column name="ALERT_IMM_NOTIFICATION_DATE" type="TIMESTAMP"/>
            <column name="ALERT_EXP_NOTIFICATION_DATE" type="TIMESTAMP"/>
            <column name="CERTIFICATE_STATUS" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="CERTIFICATE_TYPE" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="TB_COMMAND">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_COMMAND"/>
            </column>
            <column name="SERVER_NAME" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="COMMAND_NAME" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="DOMAIN" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="CREATION_TIME" type="TIMESTAMP"/>
        </createTable>

        <createTable tableName="TB_COMMAND_PROPERTY">
            <column name="PROPERTY_NAME" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="PROPERTY_VALUE" type="VARCHAR(255)"/>
            <column name="FK_COMMAND" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="TB_CONFIGURATION">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_CONFIGURATION"/>
            </column>
            <column name="FK_BUSINESSPROCESSES" type="BIGINT"/>
            <column name="FK_PARTY" type="BIGINT"/>
        </createTable>

        <createTable tableName="TB_CONFIGURATION_AUD">
            <column name="ID_PK" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_CONFIGURATION_AUD"/>
            </column>
            <column name="REV" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_CONFIGURATION_AUD"/>
            </column>
            <column name="REVTYPE" type="TINYINT"/>
            <column name="EXPRESSION" type="VARCHAR(255)"/>
            <column name="EXPRESSION_MOD" type="BOOLEAN"/>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="NAME_MOD" type="BOOLEAN"/>
        </createTable>

        <createTable tableName="TB_CONFIGURATION_RAW">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_CONFIGURATION_RAW"/>
            </column>
            <column name="CONFIGURATION_DATE" type="TIMESTAMP"/>
            <column name="XML" type="BLOB"/>
            <column defaultValue="" name="DESCRIPTION" type="VARCHAR(255)"/>
        </createTable>

        <createTable tableName="TB_CONFIGURATION_RAW_AUD">
            <column name="ID_PK" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_CONFIGURATION_RAW_AUD"/>
            </column>
            <column name="REV" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_CONFIGURATION_RAW_AUD"/>
            </column>
            <column name="REVTYPE" type="TINYINT"/>
            <column name="CONFIGURATION_DATE" type="TIMESTAMP"/>
            <column name="CONFIGURATIONDATE_MOD" type="BOOLEAN"/>
            <column name="DESCRIPTION" type="VARCHAR(255)"/>
            <column name="DESCRIPTION_MOD" type="VARCHAR(255)"/>
            <column name="XML" type="BLOB"/>
            <column name="XML_MOD" type="BOOLEAN"/>
        </createTable>

        <createTable tableName="TB_ENCRYPTION_KEY">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_ENCRYPTION_KEY"/>
            </column>
            <column name="KEY_USAGE" type="VARCHAR(255)"/>
            <column name="SECRET_KEY" type="BLOB">
                <constraints nullable="false"/>
            </column>
            <column name="INIT_VECTOR" type="BLOB">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="TB_ERROR">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_ERROR"/>
            </column>
            <column name="CATEGORY" type="VARCHAR(255)"/>
            <column name="DESCRIPTION_LANG" type="VARCHAR(255)"/>
            <column name="DESCRIPTION_VALUE" type="VARCHAR(255)"/>
            <column name="ERROR_CODE" type="VARCHAR(255)"/>
            <column name="ERROR_DETAIL" type="CLOB"/>
            <column name="ORIGIN" type="VARCHAR(255)"/>
            <column name="REF_TO_MESSAGE_ID" type="VARCHAR(255)"/>
            <column name="SEVERITY" type="VARCHAR(255)"/>
            <column name="SHORT_DESCRIPTION" type="VARCHAR(255)"/>
            <column name="SIGNALMESSAGE_ID" type="BIGINT"/>
        </createTable>

        <createTable tableName="TB_ERROR_HANDLING">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_ERROR_HANDLING"/>
            </column>
            <column name="BUSINESS_ERROR_NOTIFY_CONSUMER" type="BOOLEAN"/>
            <column name="BUSINESS_ERROR_NOTIFY_PRODUCER" type="BOOLEAN"/>
            <column name="DELIVERY_FAIL_NOTIFY_PRODUCER" type="BOOLEAN"/>
            <column name="ERROR_AS_RESPONSE" type="BOOLEAN"/>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="FK_BUSINESSPROCESS" type="BIGINT"/>
        </createTable>

        <createTable tableName="TB_ERROR_LOG">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_ERROR_LOG"/>
            </column>
            <column name="ERROR_CODE" type="VARCHAR(255)"/>
            <column name="ERROR_DETAIL" type="VARCHAR(255)"/>
            <column name="ERROR_SIGNAL_MESSAGE_ID" type="VARCHAR(255)"/>
            <column name="MESSAGE_IN_ERROR_ID" type="VARCHAR(255)"/>
            <column name="MSH_ROLE" type="VARCHAR(255)"/>
            <column name="NOTIFIED" type="TIMESTAMP"/>
            <column name="TIME_STAMP" type="TIMESTAMP"/>
        </createTable>

        <createTable tableName="TB_EVENT">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_EVENT"/>
            </column>
            <column name="EVENT_TYPE" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="REPORTING_TIME" type="TIMESTAMP"/>
            <column name="LAST_ALERT_DATE" type="TIMESTAMP"/>
        </createTable>

        <createTable tableName="TB_EVENT_ALERT">
            <column name="FK_EVENT" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_EVENT_ALERT"/>
            </column>
            <column name="FK_ALERT" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_EVENT_ALERT"/>
            </column>
        </createTable>

        <createTable tableName="TB_EVENT_PROPERTY">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_EVENT_PROPERTY"/>
            </column>
            <column name="PROPERTY_TYPE" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="FK_EVENT" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="DTYPE" type="VARCHAR(31)"/>
            <column name="STRING_VALUE" type="VARCHAR(255)"/>
            <column name="DATE_VALUE" type="TIMESTAMP"/>
        </createTable>

        <createTable tableName="TB_JOIN_PAYLOAD_PROFILE">
            <column name="FK_PAYLOAD" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="FK_PROFILE" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="TB_JOIN_PROCESS_INIT_PARTY">
            <column name="PROCESS_FK" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="PARTY_FK" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="TB_JOIN_PROCESS_LEG">
            <column name="PROCESS_FK" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="LEG_FK" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="TB_JOIN_PROCESS_RESP_PARTY">
            <column name="PROCESS_FK" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="PARTY_FK" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="TB_JOIN_PROPERTY_SET">
            <column name="PROPERTY_FK" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="SET_FK" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="TB_LEG">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_LEG"/>
            </column>
            <column name="COMPRESS_PAYLOADS" type="BOOLEAN"/>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="FK_ACTION" type="BIGINT"/>
            <column name="FK_MPC" type="BIGINT"/>
            <column name="FK_ERROR_HANDLING" type="BIGINT"/>
            <column name="FK_PAYLOAD_PROFILE" type="BIGINT"/>
            <column name="FK_PROPERTY_SET" type="BIGINT"/>
            <column name="FK_RECEPTION_AWARENESS" type="BIGINT"/>
            <column name="FK_RELIABILITY" type="BIGINT"/>
            <column name="FK_SECURITY" type="BIGINT"/>
            <column name="FK_SERVICE" type="BIGINT"/>
            <column name="FK_BUSINESSPROCESS" type="BIGINT"/>
            <column name="FK_SPLITTING" type="BIGINT"/>
        </createTable>

        <createTable tableName="TB_LEG_TB_MPC">
            <column name="LEGCONFIGURATION_ID_PK" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="PRIMARY_12"/>
            </column>
            <column name="PARTYMPCMAP_ID_PK" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="PARTYMPCMAP_KEY" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="PRIMARY_12"/>
            </column>
        </createTable>

        <createTable tableName="TB_MEP">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_MEP"/>
            </column>
            <column name="LEG_COUNT" type="INT"/>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="VALUE" type="VARCHAR(255)"/>
            <column name="FK_BUSINESSPROCESS" type="BIGINT"/>
        </createTable>

        <createTable tableName="TB_MEP_BINDING">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_MEP_BINDING"/>
            </column>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="VALUE" type="VARCHAR(255)"/>
            <column name="FK_BUSINESSPROCESS" type="BIGINT"/>
        </createTable>

        <createTable tableName="TB_MESSAGE_ACKNW">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_MESSAGE_ACKNW"/>
            </column>
            <column name="MESSAGE_ID" type="VARCHAR(255)"/>
            <column name="FROM_VALUE" type="VARCHAR(255)"/>
            <column name="TO_VALUE" type="VARCHAR(255)"/>
            <column name="CREATE_DATE" type="TIMESTAMP"/>
            <column name="CREATE_USER" type="VARCHAR(255)"/>
            <column name="ACKNOWLEDGE_DATE" type="TIMESTAMP"/>
        </createTable>

        <createTable tableName="TB_MESSAGE_ACKNW_PROP">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_MESSAGE_ACKNW_PROP"/>
            </column>
            <column name="PROPERTY_NAME" type="VARCHAR(255)"/>
            <column name="PROPERTY_VALUE" type="VARCHAR(255)"/>
            <column name="FK_MSG_ACKNOWLEDGE" type="BIGINT"/>
        </createTable>

        <createTable tableName="TB_MESSAGE_FRAGMENT">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_MESSAGE_FRAGMENT"/>
            </column>
            <column name="GROUP_ID" type="VARCHAR(255)"/>
            <column name="FRAGMENT_NUMBER" type="INT"/>
        </createTable>

        <createTable remarks="Stores information about the message group for SplitAndJoin" tableName="TB_MESSAGE_GROUP">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_MESSAGE_GROUP"/>
            </column>
            <column name="GROUP_ID" remarks="The group id" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="MSH_ROLE" remarks="The role of the MSH" type="VARCHAR(255)"/>
            <column name="SOURCE_MESSAGE_ID" remarks="The SourceMessage id" type="VARCHAR(255)"/>
            <column name="MESSAGE_SIZE" remarks="The message size before compression" type="BIGINT"/>
            <column name="FRAGMENT_COUNT" remarks="The message fragment count" type="INT"/>
            <column name="SENT_FRAGMENTS" remarks="Stores how many fragments have been sent" type="INT"/>
            <column name="RECEIVED_FRAGMENTS" remarks="Stores how many fragments have been received" type="INT"/>
            <column name="COMPRESSION_ALGORITHM" remarks="Compression algorithm used for the SourceMessage" type="VARCHAR(255)"/>
            <column name="COMPRESSED_MESSAGE_SIZE" remarks="The size of the message after compression" type="BIGINT"/>
            <column name="SOAP_ACTION" remarks="The Soap action value" type="VARCHAR(255)"/>
            <column name="FK_MESSAGE_HEADER_ID" remarks="Foreign key to the TB_MESSAGE_HEADER" type="BIGINT"/>
            <column name="REJECTED" remarks="True if the message group has been rejected" type="BOOLEAN"/>
            <column name="EXPIRED" remarks="True if the message group has expired" type="BOOLEAN"/>
        </createTable>

        <createTable remarks="Stores the message header details for SplitAndJoin" tableName="TB_MESSAGE_HEADER">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_MESSAGE_HEADER"/>
            </column>
            <column name="BOUNDARY" remarks="The multipart boundary value" type="VARCHAR(255)"/>
            <column name="START" remarks="The multipart start value" type="VARCHAR(255)"/>
        </createTable>

        <createTable tableName="TB_MESSAGE_INFO">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_MESSAGE_INFO"/>
            </column>
            <column name="MESSAGE_ID" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="REF_TO_MESSAGE_ID" type="VARCHAR(255)"/>
            <column name="TIME_STAMP" type="TIMESTAMP"/>
        </createTable>

        <createTable tableName="TB_MESSAGE_LOG">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_MESSAGE_LOG"/>
            </column>
            <column name="DELETED" type="TIMESTAMP"/>
            <column name="MESSAGE_ID" type="VARCHAR(255)"/>
            <column name="MESSAGE_STATUS" type="VARCHAR(255)"/>
            <column name="MESSAGE_TYPE" type="VARCHAR(255)"/>
            <column name="MPC" type="VARCHAR(255)"/>
            <column name="MSH_ROLE" type="VARCHAR(255)"/>
            <column name="NEXT_ATTEMPT" type="TIMESTAMP"/>
            <column name="NOTIFICATION_STATUS" type="VARCHAR(255)"/>
            <column name="RECEIVED" type="TIMESTAMP"/>
            <column name="RESTORED" type="TIMESTAMP"/>
            <column name="DOWNLOADED" type="TIMESTAMP"/>
            <column name="FAILED" type="TIMESTAMP"/>
            <column name="SEND_ATTEMPTS" type="INT"/>
            <column name="SEND_ATTEMPTS_MAX" type="INT"/>
            <column name="BACKEND" type="VARCHAR(255)"/>
            <column name="ENDPOINT" type="VARCHAR(255)"/>
            <column name="CREATED_BY" type="VARCHAR(255)"/>
            <column name="MESSAGE_SUBTYPE" type="VARCHAR(255)"/>
            <column name="SOURCE_MESSAGE" remarks="true if the message is a SourceMessage" type="BOOLEAN"/>
            <column name="MESSAGE_FRAGMENT" remarks="true if the message is a message fragment" type="BOOLEAN"/>
            <column name="SCHEDULED" remarks="true if the message is already scheduled to be sent" type="BOOLEAN"/>
        </createTable>

        <createTable tableName="TB_MESSAGE_PROPERTY">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_MESSAGE_PROPERTY"/>
            </column>
            <column name="DATATYPE" type="VARCHAR(255)"/>
            <column name="KEY_" type="VARCHAR(255)"/>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="REQUIRED_" type="BOOLEAN"/>
            <column name="FK_BUSINESSPROCESS" type="BIGINT"/>
        </createTable>

        <createTable tableName="TB_MESSAGE_PROPERTY_SET">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_MESSAGE_PROPERTY_SET"/>
            </column>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="FK_BUSINESSPROCESS" type="BIGINT"/>
        </createTable>

        <createTable tableName="TB_MESSAGE_UI">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_MESSAGE_UI"/>
            </column>
            <column name="MESSAGE_ID" type="VARCHAR(255)"/>
            <column name="MESSAGE_STATUS" type="VARCHAR(255)"/>
            <column name="NOTIFICATION_STATUS" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="MSH_ROLE" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="MESSAGE_TYPE" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="DELETED" type="TIMESTAMP"/>
            <column name="RECEIVED" type="TIMESTAMP"/>
            <column name="SEND_ATTEMPTS" type="INT"/>
            <column name="SEND_ATTEMPTS_MAX" type="INT"/>
            <column name="NEXT_ATTEMPT" type="TIMESTAMP"/>
            <column name="CONVERSATION_ID" type="VARCHAR(255)"/>
            <column name="FROM_ID" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="TO_ID" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="FROM_SCHEME" type="VARCHAR(255)"/>
            <column name="TO_SCHEME" type="VARCHAR(255)"/>
            <column name="REF_TO_MESSAGE_ID" type="VARCHAR(255)"/>
            <column name="FAILED" type="TIMESTAMP"/>
            <column name="RESTORED" type="TIMESTAMP"/>
            <column name="MESSAGE_SUBTYPE" type="VARCHAR(255)"/>
            <column defaultValueComputed="${now}" name="LAST_MODIFIED" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column defaultValueComputed="${now}" name="LAST_MODIFIED2" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="TB_MESSAGING">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_MESSAGING"/>
            </column>
            <column name="ID" type="VARCHAR(255)"/>
            <column name="SIGNAL_MESSAGE_ID" type="BIGINT"/>
            <column name="USER_MESSAGE_ID" type="BIGINT"/>
        </createTable>

        <createTable tableName="TB_MESSAGING_LOCK">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_MESSAGING_LOCK"/>
            </column>
            <column name="MESSAGE_TYPE" type="VARCHAR(10)"/>
            <column name="MESSAGE_RECEIVED" type="TIMESTAMP"/>
            <column name="MESSAGE_STATE" type="VARCHAR(10)"/>
            <column name="MESSAGE_ID" type="VARCHAR(255)"/>
            <column name="INITIATOR" type="VARCHAR(255)"/>
            <column name="MPC" type="VARCHAR(255)"/>
            <column name="SEND_ATTEMPTS" type="INT"/>
            <column name="SEND_ATTEMPTS_MAX" type="INT"/>
            <column name="NEXT_ATTEMPT" type="TIMESTAMP"/>
            <column name="MESSAGE_STALED" type="TIMESTAMP"/>
        </createTable>

        <createTable tableName="TB_MPC">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_MPC"/>
            </column>
            <column name="DEFAULT_MPC" type="BOOLEAN"/>
            <column name="IS_ENABLED" type="BOOLEAN"/>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="QUALIFIED_NAME" type="VARCHAR(255)"/>
            <column name="RETENTION_DOWNLOADED" type="INT"/>
            <column name="RETENTION_UNDOWNLOADED" type="INT"/>
            <column name="FK_CONFIGURATION" type="BIGINT"/>
        </createTable>

        <createTable tableName="TB_PARTY">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_PARTY"/>
            </column>
            <column name="ENDPOINT" type="VARCHAR(255)"/>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="PASSWORD" type="VARCHAR(255)"/>
            <column name="USERNAME" type="VARCHAR(255)"/>
            <column name="FK_BUSINESSPROCESS" type="BIGINT"/>
        </createTable>

        <createTable tableName="TB_PARTY_AUD">
            <column name="ID_PK" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_PARTY_AUD"/>
            </column>
            <column name="REV" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_PARTY_AUD"/>
            </column>
            <column name="REVTYPE" type="TINYINT"/>
            <column name="ENDPOINT" type="VARCHAR(255)"/>
            <column name="ENDPOINT_MOD" type="BOOLEAN"/>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="NAME_MOD" type="BOOLEAN"/>
            <column name="PASSWORD" type="VARCHAR(255)"/>
            <column name="PASSWORD_MOD" type="BOOLEAN"/>
            <column name="USERNAME" type="VARCHAR(255)"/>
            <column name="USERNAME_MOD" type="BOOLEAN"/>
        </createTable>

        <createTable tableName="TB_PARTY_ID">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_PARTY_ID"/>
            </column>
            <column name="TYPE" type="VARCHAR(255)"/>
            <column name="VALUE" type="VARCHAR(255)"/>
            <column name="TO_ID" type="BIGINT"/>
            <column name="FROM_ID" type="BIGINT"/>
        </createTable>

        <createTable tableName="TB_PARTY_IDENTIFIER">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_PARTY_IDENTIFIER"/>
            </column>
            <column name="PARTY_ID" type="VARCHAR(255)"/>
            <column name="FK_PARTY_ID_TYPE" type="BIGINT"/>
            <column name="FK_PARTY" type="BIGINT"/>
        </createTable>

        <createTable tableName="TB_PARTY_IDENTIFIER_AUD">
            <column name="ID_PK" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_PARTY_IDENTIFIER_AUD"/>
            </column>
            <column name="REV" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_PARTY_IDENTIFIER_AUD"/>
            </column>
            <column name="REVTYPE" type="TINYINT"/>
            <column name="FK_PARTY" type="BIGINT"/>
        </createTable>

        <createTable tableName="TB_PARTY_ID_TYPE">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_PARTY_ID_TYPE"/>
            </column>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="VALUE" type="VARCHAR(255)"/>
            <column name="FK_BUSINESSPROCESS" type="BIGINT"/>
        </createTable>

        <createTable tableName="TB_PARTY_ID_TYPE_AUD">
            <column name="ID_PK" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_PARTY_ID_TYPE_AUD"/>
            </column>
            <column name="REV" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_PARTY_ID_TYPE_AUD"/>
            </column>
            <column name="REVTYPE" type="TINYINT"/>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="NAME_MOD" type="BOOLEAN"/>
            <column name="VALUE" type="VARCHAR(255)"/>
            <column name="VALUE_MOD" type="BOOLEAN"/>
        </createTable>

        <createTable tableName="TB_PART_INFO">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_PART_INFO"/>
            </column>
            <column name="BINARY_DATA" type="BLOB"/>
            <column name="DESCRIPTION_LANG" type="VARCHAR(255)"/>
            <column name="DESCRIPTION_VALUE" type="VARCHAR(255)"/>
            <column name="HREF" type="VARCHAR(255)"/>
            <column name="IN_BODY" type="BOOLEAN"/>
            <column name="SCHEMA_LOCATION" type="VARCHAR(255)"/>
            <column name="SCHEMA_NAMESPACE" type="VARCHAR(255)"/>
            <column name="SCHEMA_VERSION" type="VARCHAR(255)"/>
            <column name="PAYLOADINFO_ID" type="BIGINT"/>
            <column name="FILENAME" type="VARCHAR(255)"/>
            <column name="MIME" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column defaultValueNumeric="0" name="PART_ORDER" type="INT">
                <constraints nullable="false"/>
            </column>
            <column defaultValueBoolean="false" name="ENCRYPTED" type="BOOLEAN"/>
        </createTable>

        <createTable tableName="TB_PAYLOAD">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_PAYLOAD"/>
            </column>
            <column name="CID" type="VARCHAR(255)"/>
            <column name="IN_BODY" type="BOOLEAN"/>
            <column name="MAX_SIZE" type="INT"/>
            <column name="MIME_TYPE" type="VARCHAR(255)"/>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="REQUIRED_" type="BOOLEAN"/>
            <column name="SCHEMA_FILE" type="VARCHAR(255)"/>
            <column name="FK_BUSINESSPROCESS" type="BIGINT"/>
        </createTable>

        <createTable tableName="TB_PAYLOAD_PROFILE">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_PAYLOAD_PROFILE"/>
            </column>
            <column name="MAX_SIZE" type="INT"/>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="FK_BUSINESSPROCESS" type="BIGINT"/>
        </createTable>

        <createTable tableName="TB_PLUGIN_USER_PASSWD_HISTORY">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_PLUGIN_USER_PASSWD_HISTO"/>
            </column>
            <column name="USER_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="USER_PASSWORD" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="PASSWORD_CHANGE_DATE" type="TIMESTAMP"/>
        </createTable>

        <createTable tableName="TB_PROCESS">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_PROCESS"/>
            </column>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="FK_AGREEMENT" type="BIGINT"/>
            <column name="FK_INITIATOR_ROLE" type="BIGINT"/>
            <column name="FK_MEP" type="BIGINT"/>
            <column name="FK_MEP_BINDING" type="BIGINT"/>
            <column name="FK_RESPONDER_ROLE" type="BIGINT"/>
            <column name="FK_BUSINESSPROCESS" type="BIGINT"/>
            <column name="USE_DYNAMIC_INITIATOR" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="USE_DYNAMIC_RESPONDER" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="TB_PROPERTY">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_PROPERTY"/>
            </column>
            <column name="NAME" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="VALUE" type="VARCHAR(255)"/>
            <column name="MESSAGEPROPERTIES_ID" type="BIGINT"/>
            <column name="PARTPROPERTIES_ID" type="BIGINT"/>
            <column name="TYPE" type="VARCHAR(255)"/>
        </createTable>

        <createTable tableName="TB_RAWENVELOPE_LOG">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_RAWENVELOPE_LOG"/>
            </column>
            <column name="USERMESSAGE_ID_FK" type="BIGINT"/>
            <column name="SIGNALMESSAGE_ID_FK" type="BIGINT"/>
            <column name="RAW_XML" type="CLOB"/>
            <column name="MESSAGE_ID" type="VARCHAR(255)"/>
        </createTable>

        <createTable tableName="TB_RECEIPT">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_RECEIPT"/>
            </column>
        </createTable>

        <createTable tableName="TB_RECEIPT_DATA">
            <column name="RECEIPT_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="RAW_XML" type="CLOB"/>
        </createTable>

        <createTable tableName="TB_RECEPTION_AWARENESS">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_RECEPTION_AWARENESS"/>
            </column>
            <column name="DUPLICATE_DETECTION" type="BOOLEAN"/>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="RETRY_COUNT" type="INT"/>
            <column name="RETRY_TIMEOUT" type="INT"/>
            <column name="STRATEGY" type="VARCHAR(255)"/>
            <column name="FK_BUSINESSPROCESS" type="BIGINT"/>
        </createTable>

        <createTable tableName="TB_RELIABILITY">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_RELIABILITY"/>
            </column>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="NON_REPUDIATION" type="BOOLEAN"/>
            <column name="REPLY_PATTERN" type="VARCHAR(255)"/>
            <column name="FK_BUSINESSPROCESS" type="BIGINT"/>
        </createTable>

        <createTable tableName="TB_REV_CHANGES">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_REV_CHANGES"/>
            </column>
            <column name="REV" type="BIGINT"/>
            <column name="AUDIT_ORDER" type="INT"/>
            <column name="ENTIY_NAME" type="VARCHAR(255)"/>
            <column name="GROUP_NAME" type="VARCHAR(255)"/>
            <column name="ENTITY_ID" type="VARCHAR(255)"/>
            <column name="MODIFICATION_TYPE" type="VARCHAR(255)"/>
        </createTable>

        <createTable tableName="TB_REV_INFO">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_REV_INFO"/>
            </column>
            <column name="TIMESTAMP" type="BIGINT"/>
            <column name="REVISION_DATE" type="TIMESTAMP"/>
            <column name="USER_NAME" type="VARCHAR(255)"/>
        </createTable>

        <createTable tableName="TB_ROLE">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_ROLE"/>
            </column>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="VALUE" type="VARCHAR(255)"/>
            <column name="FK_BUSINESSPROCESS" type="BIGINT"/>
        </createTable>

        <createTable tableName="TB_ROUTING_CRITERIA">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_ROUTING_CRITERIA"/>
            </column>
            <column name="EXPRESSION" type="VARCHAR(255)"/>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="FK_BACKEND_FILTER" type="BIGINT"/>
            <column name="PRIORITY" type="INT"/>
        </createTable>

        <createTable tableName="TB_ROUTING_CRITERIA_AUD">
            <column name="ID_PK" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_ROUTING_CRITERIA_AUD"/>
            </column>
            <column name="REV" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_ROUTING_CRITERIA_AUD"/>
            </column>
            <column name="REVTYPE" type="TINYINT"/>
            <column name="EXPRESSION" type="VARCHAR(255)"/>
            <column name="EXPRESSION_MOD" type="BOOLEAN"/>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="NAME_MOD" type="BOOLEAN"/>
        </createTable>

        <createTable tableName="TB_SECURITY">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_SECURITY"/>
            </column>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="POLICY" type="VARCHAR(255)"/>
            <column name="SIGNATURE_METHOD" type="VARCHAR(255)"/>
            <column name="FK_BUSINESSPROCESS" type="BIGINT"/>
        </createTable>

        <createTable tableName="TB_SEND_ATTEMPT">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_SEND_ATTEMPT"/>
            </column>
            <column name="MESSAGE_ID" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="START_DATE" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="END_DATE" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="STATUS" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="ERROR" type="VARCHAR(255)"/>
        </createTable>

        <createTable tableName="TB_SERVICE">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_SERVICE"/>
            </column>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="SERVICE_TYPE" type="VARCHAR(255)"/>
            <column name="VALUE" type="VARCHAR(255)"/>
            <column name="FK_BUSINESSPROCESS" type="BIGINT"/>
        </createTable>

        <createTable tableName="TB_SIGNAL_MESSAGE">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_SIGNAL_MESSAGE"/>
            </column>
            <column name="PULL_REQUEST_MPC" type="VARCHAR(255)"/>
            <column name="MESSAGEINFO_ID_PK" type="BIGINT"/>
            <column name="RECEIPT_ID_PK" type="BIGINT"/>
        </createTable>

        <createTable remarks="Stores the configuration of the SplitAndJoin parameters configured in the PMode" tableName="TB_SPLITTING">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_SPLITTING"/>
            </column>
            <column name="NAME" remarks="Splitting configuration name" type="VARCHAR(255)"/>
            <column name="FRAGMENT_SIZE" remarks="The fragment size" type="INT"/>
            <column name="COMPRESSION" remarks="True if compression will be used" type="BOOLEAN"/>
            <column name="COMPRESSION_ALGORITHM" remarks="Compression algorithm to use for compressing the SourceMessage" type="VARCHAR(255)"/>
            <column name="JOIN_INTERVAL" remarks="The join interval" type="INT"/>
            <column name="FK_BUSINESSPROCESS" remarks="Foreign key to the business process" type="BIGINT"/>
        </createTable>

        <createTable tableName="TB_USER">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_USER"/>
            </column>
            <column name="USER_EMAIL" type="VARCHAR(255)"/>
            <column name="USER_ENABLED" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="USER_PASSWORD" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="USER_NAME" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="OPTLOCK" type="INT"/>
            <column defaultValueNumeric="0" name="ATTEMPT_COUNT" type="INT"/>
            <column name="SUSPENSION_DATE" type="TIMESTAMP"/>
            <column defaultValueNumeric="0" name="USER_DELETED" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column defaultValueComputed="${now}" name="PASSWORD_CHANGE_DATE" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column defaultValueNumeric="0" name="DEFAULT_PASSWORD" type="BOOLEAN"/>
        </createTable>

        <createTable tableName="TB_USER_AUD">
            <column name="ID_PK" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_USER_AUD"/>
            </column>
            <column name="REV" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_USER_AUD"/>
            </column>
            <column name="REVTYPE" type="TINYINT"/>
            <column name="USER_ENABLED" type="BOOLEAN"/>
            <column name="ACTIVE_MOD" type="BOOLEAN"/>
            <column name="USER_DELETED" type="BOOLEAN"/>
            <column name="DELETED_MOD" type="BOOLEAN"/>
            <column name="USER_EMAIL" type="VARCHAR(255)"/>
            <column name="EMAIL_MOD" type="BOOLEAN"/>
            <column name="USER_PASSWORD" type="VARCHAR(255)"/>
            <column name="PASSWORD_MOD" type="BOOLEAN"/>
            <column name="USER_NAME" type="VARCHAR(255)"/>
            <column name="USERNAME_MOD" type="BOOLEAN"/>
            <column name="OPTLOCK" type="INT"/>
            <column name="VERSION_MOD" type="BOOLEAN"/>
            <column name="ROLES_MOD" type="BOOLEAN"/>
            <column name="PASSWORD_CHANGE_DATE" type="TIMESTAMP"/>
            <column name="PASSWORDCHANGEDATE_MOD" type="BOOLEAN"/>
            <column name="DEFAULT_PASSWORD" type="BOOLEAN"/>
            <column name="DEFAULTPASSWORD_MOD" type="BOOLEAN"/>
        </createTable>

        <createTable tableName="TB_USER_MESSAGE">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_USER_MESSAGE"/>
            </column>
            <column name="COLLABORATION_INFO_ACTION" type="VARCHAR(255)"/>
            <column name="AGREEMENT_REF_PMODE" type="VARCHAR(255)"/>
            <column name="AGREEMENT_REF_TYPE" type="VARCHAR(255)"/>
            <column name="AGREEMENT_REF_VALUE" type="VARCHAR(255)"/>
            <column name="COLL_INFO_CONVERS_ID" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="SERVICE_TYPE" type="VARCHAR(255)"/>
            <column name="SERVICE_VALUE" type="VARCHAR(255)"/>
            <column name="MPC" type="VARCHAR(255)"/>
            <column name="FROM_ROLE" type="VARCHAR(255)"/>
            <column name="TO_ROLE" type="VARCHAR(255)"/>
            <column name="MESSAGEINFO_ID_PK" type="BIGINT"/>
            <column name="FK_MESSAGE_FRAGMENT_ID" type="INT"/>
            <column name="SPLIT_AND_JOIN" type="BOOLEAN"/>
        </createTable>

        <createTable tableName="TB_USER_PASSWORD_HISTORY">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_USER_PASSWORD_HISTORY"/>
            </column>
            <column name="USER_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="USER_PASSWORD" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="PASSWORD_CHANGE_DATE" type="TIMESTAMP"/>
        </createTable>

        <createTable tableName="TB_USER_ROLE">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_TB_USER_ROLE"/>
            </column>
            <column name="ROLE_NAME" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="TB_USER_ROLES">
            <column name="USER_ID" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_PRIMARY"/>
            </column>
            <column name="ROLE_ID" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_PRIMARY"/>
            </column>
        </createTable>

        <createTable tableName="TB_USER_ROLES_AUD">
            <column name="REV" type="BIGINT"/>
            <column name="REVTYPE" type="TINYINT"/>
            <column name="USER_ID" type="BIGINT"/>
            <column name="ROLE_ID" type="BIGINT"/>
        </createTable>

        <createTable tableName="TB_USER_ROLE_AUD">
            <column name="ID_PK" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_USER_ROLE_AUD"/>
            </column>
            <column name="REV" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_USER_ROLE_AUD"/>
            </column>
            <column name="REVTYPE" type="TINYINT"/>
            <column name="ROLE_NAME" type="VARCHAR(255)"/>
            <column name="NAME_MOD" type="BOOLEAN"/>
            <column name="USERS_MOD" type="BOOLEAN"/>
        </createTable>
    </changeSet>

    <changeSet author="Catalin Enache" id="1564477107969-95">
        <comment>create unique constraints</comment>

        <addUniqueConstraint columnNames="CERTIFICATE_ALIAS, CERTIFICATE_TYPE" constraintName="CERTIFICATE_ALIAS"
                             tableName="TB_CERTIFICATE"/>

        <addUniqueConstraint columnNames="PARTYMPCMAP_ID_PK" constraintName="UK_7H5NW411791GF4LG1YH6SI1WD"
                             tableName="TB_LEG_TB_MPC"/>

        <addUniqueConstraint columnNames="MESSAGE_ID" constraintName="UK_ECRRAOE83O1UQQ0DN9424X7LN"
                             tableName="TB_MESSAGE_INFO"/>

        <addUniqueConstraint columnNames="FK_COMMAND, PROPERTY_NAME" constraintName="UNI_COMMAND_PROP_NAME"
                             tableName="TB_COMMAND_PROPERTY"/>

        <addUniqueConstraint columnNames="MESSAGE_ID" constraintName="UNI_MSG_UI_MSG_ID" tableName="TB_MESSAGE_UI"/>

        <addUniqueConstraint columnNames="KEY_USAGE" constraintName="UQ_KEY_USAGE" tableName="TB_ENCRYPTION_KEY"/>

        <addUniqueConstraint columnNames="ROLE_NAME" constraintName="UQ_ROLE_NAME" tableName="TB_USER_ROLE"/>

        <addUniqueConstraint columnNames="USER_NAME" constraintName="USER_NAME" tableName="TB_USER"/>
    </changeSet>

    <changeSet author="Catalin Enache" id="1564477107969-104">
        <comment>create indexes</comment>
        <createIndex indexName="IDX_MESSAGE_LOCK_UNIQUE_ID" tableName="TB_MESSAGING_LOCK" unique="true">
            <column name="MESSAGE_ID"/>
        </createIndex>

        <createIndex indexName="FK_13K2EPTP1EJP5OTHY1NJRG3P8" tableName="TB_LEG">
            <column name="FK_RELIABILITY"/>
        </createIndex>

        <createIndex indexName="FK_277J83LGSQ3NMWYHSW637YND8" tableName="TB_MEP_BINDING">
            <column name="FK_BUSINESSPROCESS"/>
        </createIndex>

        <createIndex indexName="FK_2H31P0A2Y6WEG2GRH70C9CYVA" tableName="TB_PROPERTY">
            <column name="MESSAGEPROPERTIES_ID"/>
        </createIndex>

        <createIndex indexName="FK_2SW6KNALOR7RPR04YE0O2R9AP" tableName="TB_ROLE">
            <column name="FK_BUSINESSPROCESS"/>
        </createIndex>

        <createIndex indexName="FK_3EMT6XAGLH7676LPCKIY6R1VB" tableName="TB_PROCESS">
            <column name="FK_RESPONDER_ROLE"/>
        </createIndex>

        <createIndex indexName="FK_3SGAXWFR5KOE3OLDBBD62SIWQ" tableName="TB_RECEPTION_AWARENESS">
            <column name="FK_BUSINESSPROCESS"/>
        </createIndex>

        <createIndex indexName="FK_433RGM5A446T59Q6JKB885L3X" tableName="TB_MESSAGING">
            <column name="USER_MESSAGE_ID"/>
        </createIndex>

        <createIndex indexName="FK_53GP9SMTEMQCUIO8O9T10NARM" tableName="TB_MESSAGING">
            <column name="SIGNAL_MESSAGE_ID"/>
        </createIndex>

        <createIndex indexName="FK_62DT1Y6O7OD1T0IQN7DOW8UQ5" tableName="TB_CONFIGURATION">
            <column name="FK_BUSINESSPROCESSES"/>
        </createIndex>

        <createIndex indexName="FK_6HLDNNQKMH6LUI555T4N9FJIV" tableName="TB_ACTION">
            <column name="FK_BUSINESSPROCESS"/>
        </createIndex>

        <createIndex indexName="FK_70M9KQPQAB3RGK90WSUV9VN64" tableName="TB_AGREEMENT">
            <column name="FK_BUSINESSPROCESS"/>
        </createIndex>

        <createIndex indexName="FK_7P1G7SQVLI1SJ6K7VPHJO9IRC" tableName="TB_PROCESS">
            <column name="FK_BUSINESSPROCESS"/>
        </createIndex>

        <createIndex indexName="FK_8NCCAE214MVS1KH5SGCJ3Y5OY" tableName="TB_RECEIPT_DATA">
            <column name="RECEIPT_ID"/>
        </createIndex>

        <createIndex indexName="FK_8Q319STWM1NOIJPB3JFL8JRI8" tableName="TB_MPC">
            <column name="FK_CONFIGURATION"/>
        </createIndex>

        <createIndex indexName="FK_9HPMOEWLITIVCL8RW1JOCCUAU" tableName="TB_LEG">
            <column name="FK_SECURITY"/>
        </createIndex>

        <createIndex indexName="FK_ADVGUDIX024IRQPUGE4DL9IQF" tableName="TB_PARTY_ID_TYPE">
            <column name="FK_BUSINESSPROCESS"/>
        </createIndex>

        <createIndex indexName="FK_AM7BWSM92SE3NVCLBEIEP5VWG" tableName="TB_LEG">
            <column name="FK_PAYLOAD_PROFILE"/>
        </createIndex>

        <createIndex indexName="FK_ASJDL57BUDMUWMJ3611969JPP" tableName="TB_JOIN_PROCESS_INIT_PARTY">
            <column name="PARTY_FK"/>
        </createIndex>

        <createIndex indexName="FK_BACKEND_FILTER_AUD_REV" tableName="TB_BACKEND_FILTER_AUD">
            <column name="REV"/>
        </createIndex>

        <createIndex indexName="FK_BACK_RCRITERIA_AUD" tableName="TB_BACK_RCRITERIA_AUD">
            <column name="REV"/>
        </createIndex>

        <createIndex indexName="FK_BE4XC1069QYW2KLHVM3XMG26S" tableName="TB_USER_MESSAGE">
            <column name="MESSAGEINFO_ID_PK"/>
        </createIndex>

        <createIndex indexName="FK_C08LJJWI4P9DX1RJTCDBE1SFU" tableName="TB_SIGNAL_MESSAGE">
            <column name="MESSAGEINFO_ID_PK"/>
        </createIndex>

        <createIndex indexName="FK_CLOYY9K391VHSUP85IWR8IXIV" tableName="TB_PARTY">
            <column name="FK_BUSINESSPROCESS"/>
        </createIndex>

        <createIndex indexName="FK_CONFIGURATION_AUD_REV" tableName="TB_CONFIGURATION_AUD">
            <column name="REV"/>
        </createIndex>

        <createIndex indexName="FK_CONFIGURATION_RAW_AUD" tableName="TB_CONFIGURATION_RAW_AUD">
            <column name="REV"/>
        </createIndex>

        <createIndex indexName="FK_CWYLVG6ERNWBA61MO3YAGMKG8" tableName="TB_PROPERTY">
            <column name="PARTPROPERTIES_ID"/>
        </createIndex>

        <createIndex indexName="FK_D9EL0L8U1GM5OEU67NQRKHERQ" tableName="TB_PAYLOAD">
            <column name="FK_BUSINESSPROCESS"/>
        </createIndex>

        <createIndex indexName="FK_DESR6XTDP1LP41D5VENLHF4BC" tableName="TB_PARTY_IDENTIFIER">
            <column name="FK_PARTY"/>
        </createIndex>

        <createIndex indexName="FK_DGTGTG41YRFEBYYSMKYI1GCAA" tableName="TB_LEG">
            <column name="FK_ACTION"/>
        </createIndex>

        <createIndex indexName="FK_E7EHGHIFRNS83W6V3TPS7VPII" tableName="TB_PARTY_IDENTIFIER">
            <column name="FK_PARTY_ID_TYPE"/>
        </createIndex>

        <createIndex indexName="FK_EIY3F9AHX0KDX4WXOI6PRYTN9" tableName="TB_MESSAGE_PROPERTY_SET">
            <column name="FK_BUSINESSPROCESS"/>
        </createIndex>

        <createIndex indexName="FK_EKK8PN89Y50G22KD3GPJA7J39" tableName="TB_JOIN_PROPERTY_SET">
            <column name="PROPERTY_FK"/>
        </createIndex>

        <createIndex indexName="FK_EPMXKH8U7JNW5PBYJ47SIRMLH" tableName="TB_MEP">
            <column name="FK_BUSINESSPROCESS"/>
        </createIndex>

        <createIndex indexName="FK_FKFTD5ORW2ETIU4GHMN3MHX9I" tableName="TB_PARTY_ID">
            <column name="FROM_ID"/>
        </createIndex>

        <createIndex indexName="FK_FPXBDC63GIFACRD4QB6AFRQYW" tableName="TB_JOIN_PROCESS_LEG">
            <column name="PROCESS_FK"/>
        </createIndex>

        <createIndex indexName="FK_FWRQ81CCTU2NH0QEPRMPVKER9" tableName="TB_SECURITY">
            <column name="FK_BUSINESSPROCESS"/>
        </createIndex>

        <createIndex indexName="FK_G20EOW5F2CKE3AVSRG6QPKUXV" tableName="TB_JOIN_PAYLOAD_PROFILE">
            <column name="FK_PROFILE"/>
        </createIndex>

        <createIndex indexName="FK_GH98Q07KCJL7WDAON9GGIFQUX" tableName="TB_JOIN_PROCESS_LEG">
            <column name="LEG_FK"/>
        </createIndex>

        <createIndex indexName="FK_HLB2Y2PRPM52SSYNN22H3SWSR" tableName="TB_JOIN_PROCESS_RESP_PARTY">
            <column name="PROCESS_FK"/>
        </createIndex>

        <createIndex indexName="FK_I7GEI6BDR2CDN61HDOPLXBU7P" tableName="TB_ROUTING_CRITERIA">
            <column name="FK_BACKEND_FILTER"/>
        </createIndex>

        <createIndex indexName="FK_J0Y3FCEDIQX5BUT8JBSCY59KW" tableName="TB_LEG">
            <column name="FK_ERROR_HANDLING"/>
        </createIndex>

        <createIndex indexName="FK_J7LAB5N5SUKLCLDQHXN8JL2JO" tableName="TB_PROCESS">
            <column name="FK_MEP"/>
        </createIndex>

        <createIndex indexName="FK_KJANLCDEAP7NIRDIGR7RT7P4V" tableName="TB_PROCESS">
            <column name="FK_AGREEMENT"/>
        </createIndex>

        <createIndex indexName="FK_KKHXS36RW15AYGPN00NVVGYXG" tableName="TB_SERVICE">
            <column name="FK_BUSINESSPROCESS"/>
        </createIndex>

        <createIndex indexName="FK_KV2C5K41APDLVC6I18AR57ABE" tableName="TB_LEG">
            <column name="FK_SERVICE"/>
        </createIndex>

        <createIndex indexName="FK_KYN19SWM143M96IN317SR97H2" tableName="TB_JOIN_PROCESS_RESP_PARTY">
            <column name="PARTY_FK"/>
        </createIndex>

        <createIndex indexName="FK_L1MMHS1TBT8PW7VX5TEUYTJVJ" tableName="TB_ERROR_HANDLING">
            <column name="FK_BUSINESSPROCESS"/>
        </createIndex>

        <createIndex indexName="FK_LE4RXNKI51EAK6XETC7FQ8SRI" tableName="TB_LEG">
            <column name="FK_PROPERTY_SET"/>
        </createIndex>

        <createIndex indexName="FK_LEG_SPLT" tableName="TB_LEG">
            <column name="FK_SPLITTING"/>
        </createIndex>

        <createIndex indexName="FK_LNNPLHIAWXX7WLT43YE3PEJ00" tableName="TB_RELIABILITY">
            <column name="FK_BUSINESSPROCESS"/>
        </createIndex>

        <createIndex indexName="FK_LYNOM7RXKC0T1XFL0NOWXPEUJ" tableName="TB_PAYLOAD_PROFILE">
            <column name="FK_BUSINESSPROCESS"/>
        </createIndex>

        <createIndex indexName="FK_M6UU2Y6G9BUET3O3K1N4QXWEC" tableName="TB_SIGNAL_MESSAGE">
            <column name="RECEIPT_ID_PK"/>
        </createIndex>

        <createIndex indexName="FK_MG_MH" tableName="TB_MESSAGE_GROUP">
            <column name="FK_MESSAGE_HEADER_ID"/>
        </createIndex>

        <createIndex indexName="FK_MK54XE43F3HOKH7FJL3W66EFK" tableName="TB_JOIN_PROPERTY_SET">
            <column name="SET_FK"/>
        </createIndex>

        <createIndex indexName="FK_MSG_ACK_PROP_MSG_ACK" tableName="TB_MESSAGE_ACKNW_PROP">
            <column name="FK_MSG_ACKNOWLEDGE"/>
        </createIndex>

        <createIndex indexName="FK_ORDDLTV2G3LQ79EU48C2MC2FY" tableName="TB_LEG_TB_MPC">
            <column name="PARTYMPCMAP_KEY"/>
        </createIndex>

        <createIndex indexName="FK_OT8JFKOTD6QU7JRDAPTROHBN8" tableName="TB_JOIN_PROCESS_INIT_PARTY">
            <column name="PROCESS_FK"/>
        </createIndex>

        <createIndex indexName="FK_PARTY_AUD_REV" tableName="TB_PARTY_AUD">
            <column name="REV"/>
        </createIndex>

        <createIndex indexName="FK_PARTY_IDENTIFIER_AUD_REV" tableName="TB_PARTY_IDENTIFIER_AUD">
            <column name="REV"/>
        </createIndex>

        <createIndex indexName="FK_PARTY_ID_TYPE_AUD_REV" tableName="TB_PARTY_ID_TYPE_AUD">
            <column name="REV"/>
        </createIndex>

        <createIndex indexName="FK_PPVXYURCVFY71FVEJW9BOSGHW" tableName="TB_LEG">
            <column name="FK_MPC"/>
        </createIndex>

        <createIndex indexName="FK_PRRCMI4GRM4TXHFSFNFHGQ1K1" tableName="TB_ERROR">
            <column name="SIGNALMESSAGE_ID"/>
        </createIndex>

        <createIndex indexName="FK_Q0L3EJ6RUQCFUTRU2SECURQ9L" tableName="TB_JOIN_PAYLOAD_PROFILE">
            <column name="FK_PAYLOAD"/>
        </createIndex>

        <createIndex indexName="FK_Q1JFSXFOJ3NL7HII3CO7BU0FR" tableName="TB_PROCESS">
            <column name="FK_INITIATOR_ROLE"/>
        </createIndex>

        <createIndex indexName="FK_Q3GAPFC1E7HFBGMO0NEBJ4K1N" tableName="TB_CONFIGURATION">
            <column name="FK_PARTY"/>
        </createIndex>

        <createIndex indexName="FK_R2SWPQOF7636VVEQT0DXL89DP" tableName="TB_LEG">
            <column name="FK_BUSINESSPROCESS"/>
        </createIndex>

        <createIndex indexName="FK_REV_CHANGES_REV" tableName="TB_REV_CHANGES">
            <column name="REV"/>
        </createIndex>

        <createIndex indexName="FK_RJ8H1B65VNJJGYFCJNVSWKGUH" tableName="TB_MESSAGE_PROPERTY">
            <column name="FK_BUSINESSPROCESS"/>
        </createIndex>

        <createIndex indexName="FK_RLBJSTVO4GPDCP6YSV9MOFQXJ" tableName="TB_LEG">
            <column name="FK_RECEPTION_AWARENESS"/>
        </createIndex>

        <createIndex indexName="FK_ROUTING_CRITERIA_AUD_REV" tableName="TB_ROUTING_CRITERIA_AUD">
            <column name="REV"/>
        </createIndex>

        <createIndex indexName="FK_SIGNALMSG_ID_FK_RAWENV_ID" tableName="TB_RAWENVELOPE_LOG">
            <column name="SIGNALMESSAGE_ID_FK"/>
        </createIndex>

        <createIndex indexName="FK_SPLT_BP" tableName="TB_SPLITTING">
            <column name="FK_BUSINESSPROCESS"/>
        </createIndex>

        <createIndex indexName="FK_TP11D8FG7CV1FWF5XKVWQPP34" tableName="TB_PROCESS">
            <column name="FK_MEP_BINDING"/>
        </createIndex>

        <createIndex indexName="FK_TQ6LBN3MP0VSFC6QQU7WXY54G" tableName="TB_PART_INFO">
            <column name="PAYLOADINFO_ID"/>
        </createIndex>

        <createIndex indexName="FK_UM_MF" tableName="TB_USER_MESSAGE">
            <column name="FK_MESSAGE_FRAGMENT_ID"/>
        </createIndex>

        <createIndex indexName="FK_USERMSG_ID_FK_RAWENV_ID" tableName="TB_RAWENVELOPE_LOG">
            <column name="USERMESSAGE_ID_FK"/>
        </createIndex>

        <createIndex indexName="FK_USER_AUD_REV" tableName="TB_USER_AUD">
            <column name="REV"/>
        </createIndex>

        <createIndex indexName="FK_USER_ROLE_AUD" tableName="TB_USER_ROLE_AUD">
            <column name="REV"/>
        </createIndex>

        <createIndex indexName="FK_YLUB8LPTGVSCH02MJ71EUUIL" tableName="TB_PARTY_ID">
            <column name="TO_ID"/>
        </createIndex>

        <createIndex indexName="IDX_FK_ALERT" tableName="TB_EVENT_ALERT">
            <column name="FK_ALERT"/>
        </createIndex>

        <createIndex indexName="IDX_FK_AUTH_ENTRY_AUD_REV" tableName="TB_AUTHENTICATION_ENTRY_AUD">
            <column name="REV"/>
        </createIndex>

        <createIndex indexName="IDX_FK_EVENT" tableName="TB_EVENT_ALERT">
            <column name="FK_EVENT"/>
        </createIndex>

        <createIndex indexName="IDX_FK_EVENT_PROPERTY" tableName="TB_EVENT_PROPERTY">
            <column name="FK_EVENT"/>
        </createIndex>

        <createIndex indexName="IDX_MESSAGE_INFO_R_T_M_ID" tableName="TB_MESSAGE_INFO">
            <column name="REF_TO_MESSAGE_ID"/>
        </createIndex>

        <createIndex indexName="IDX_MESSAGE_LOCK_SEARCH" tableName="TB_MESSAGING_LOCK">
            <column name="MESSAGE_TYPE"/>
            <column name="MESSAGE_STATE"/>
            <column name="INITIATOR"/>
            <column name="MPC"/>
            <column name="NEXT_ATTEMPT"/>
        </createIndex>

        <createIndex indexName="IDX_MESSAGE_LOG_RECEIVED" tableName="TB_MESSAGE_LOG">
            <column name="RECEIVED"/>
        </createIndex>

        <createIndex indexName="IDX_MF_GRP_ID" tableName="TB_MESSAGE_FRAGMENT">
            <column name="GROUP_ID"/>
        </createIndex>

        <createIndex indexName="IDX_MSG_LOG_M_STATUS_SEND_ATT" tableName="TB_MESSAGE_LOG">
            <column name="MESSAGE_STATUS"/>
            <column name="SEND_ATTEMPTS"/>
        </createIndex>

        <createIndex indexName="IDX_MSG_LOG_RCV_MSG_ID" tableName="TB_MESSAGE_LOG">
            <column name="RECEIVED"/>
            <column name="MESSAGE_ID"/>
        </createIndex>

        <createIndex indexName="IDX_MSG_UI_CONV_ID" tableName="TB_MESSAGE_UI">
            <column name="CONVERSATION_ID"/>
        </createIndex>

        <createIndex indexName="IDX_MSG_UI_FROM_ID" tableName="TB_MESSAGE_UI">
            <column name="FROM_ID"/>
        </createIndex>

        <createIndex indexName="IDX_MSG_UI_FROM_SCHEME" tableName="TB_MESSAGE_UI">
            <column name="FROM_SCHEME"/>
        </createIndex>

        <createIndex indexName="IDX_MSG_UI_MSH_ROLE" tableName="TB_MESSAGE_UI">
            <column name="MSH_ROLE"/>
        </createIndex>

        <createIndex indexName="IDX_MSG_UI_REF_MSG_ID" tableName="TB_MESSAGE_UI">
            <column name="REF_TO_MESSAGE_ID"/>
        </createIndex>

        <createIndex indexName="IDX_MSG_UI_STS_TYPE_STYPE_RCV" tableName="TB_MESSAGE_UI">
            <column name="MESSAGE_STATUS"/>
            <column name="MESSAGE_TYPE"/>
            <column name="MESSAGE_SUBTYPE"/>
            <column name="RECEIVED"/>
        </createIndex>

        <createIndex indexName="IDX_MSG_UI_TO_ID" tableName="TB_MESSAGE_UI">
            <column name="TO_ID"/>
        </createIndex>

        <createIndex indexName="IDX_MSG_UI_TO_SCHEME" tableName="TB_MESSAGE_UI">
            <column name="TO_SCHEME"/>
        </createIndex>

        <createIndex indexName="IDX_MSG_UI_TYPE_RCV" tableName="TB_MESSAGE_UI">
            <column name="MESSAGE_TYPE"/>
            <column name="RECEIVED"/>
        </createIndex>

        <createIndex indexName="IDX_MSG_UI_TYPE_STYPE_RCV" tableName="TB_MESSAGE_UI">
            <column name="MESSAGE_TYPE"/>
            <column name="MESSAGE_SUBTYPE"/>
            <column name="RECEIVED"/>
        </createIndex>

        <createIndex indexName="IDX_PARTY_ID_VALUE" tableName="TB_PARTY_ID">
            <column name="VALUE"/>
        </createIndex>

        <createIndex indexName="IDX_PLUGIN_USER_ID" tableName="TB_PLUGIN_USER_PASSWD_HISTORY">
            <column name="USER_ID"/>
        </createIndex>

        <createIndex indexName="IDX_PROPERTY_NAME" tableName="TB_PROPERTY">
            <column name="NAME"/>
        </createIndex>

        <createIndex indexName="IDX_PROP_NAME_MSGPROPS_ID" tableName="TB_PROPERTY">
            <column name="NAME"/>
            <column name="MESSAGEPROPERTIES_ID"/>
        </createIndex>

        <createIndex indexName="IDX_PROP_NAME_MSGPROPS_ID_VAL" tableName="TB_PROPERTY">
            <column name="NAME"/>
            <column name="MESSAGEPROPERTIES_ID"/>
            <column name="VALUE"/>
        </createIndex>

        <createIndex indexName="IDX_RAWENVELOPE_MESSAGE_ID" tableName="TB_RAWENVELOPE_LOG">
            <column name="MESSAGE_ID"/>
        </createIndex>

        <createIndex indexName="IDX_ROLE_ID" tableName="TB_USER_ROLES">
            <column name="ROLE_ID"/>
        </createIndex>

        <createIndex indexName="IDX_TB_ML_MSG_ID" tableName="TB_MESSAGE_LOG">
            <column name="MESSAGE_ID"/>
        </createIndex>

        <createIndex indexName="IDX_UPH_USER_ID" tableName="TB_USER_PASSWORD_HISTORY">
            <column name="USER_ID"/>
        </createIndex>

        <createIndex indexName="IDX_USER_ID" tableName="TB_USER_ROLES">
            <column name="USER_ID"/>
        </createIndex>

        <createIndex indexName="UK_BPEFLT902YBU9NSHBA2FJPV9D" tableName="TB_MESSAGE_LOG">
            <column name="MSH_ROLE"/>
        </createIndex>
    </changeSet>

    <!-- foreign keys -->
    <changeSet author="Catalin Enache" id="1564477107969-234">
        <comment>create foreign keys</comment>
        <addForeignKeyConstraint baseColumnNames="FK_RELIABILITY" baseTableName="TB_LEG"
                                 constraintName="FK_13K2EPTP1EJP5OTHY1NJRG3P8" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_RELIABILITY"/>

        <addForeignKeyConstraint baseColumnNames="FK_BUSINESSPROCESS" baseTableName="TB_MEP_BINDING"
                                 constraintName="FK_277J83LGSQ3NMWYHSW637YND8" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_BUSINESS_PROCESS"/>

        <addForeignKeyConstraint baseColumnNames="MESSAGEPROPERTIES_ID" baseTableName="TB_PROPERTY"
                                 constraintName="FK_2H31P0A2Y6WEG2GRH70C9CYVA" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_USER_MESSAGE"/>

        <addForeignKeyConstraint baseColumnNames="FK_BUSINESSPROCESS" baseTableName="TB_ROLE"
                                 constraintName="FK_2SW6KNALOR7RPR04YE0O2R9AP" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_BUSINESS_PROCESS"/>

        <addForeignKeyConstraint baseColumnNames="FK_RESPONDER_ROLE" baseTableName="TB_PROCESS"
                                 constraintName="FK_3EMT6XAGLH7676LPCKIY6R1VB" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_ROLE"/>

        <addForeignKeyConstraint baseColumnNames="FK_BUSINESSPROCESS" baseTableName="TB_RECEPTION_AWARENESS"
                                 constraintName="FK_3SGAXWFR5KOE3OLDBBD62SIWQ" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_BUSINESS_PROCESS"/>

        <addForeignKeyConstraint baseColumnNames="USER_MESSAGE_ID" baseTableName="TB_MESSAGING"
                                 constraintName="FK_433RGM5A446T59Q6JKB885L3X" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_USER_MESSAGE"/>

        <addForeignKeyConstraint baseColumnNames="SIGNAL_MESSAGE_ID" baseTableName="TB_MESSAGING"
                                 constraintName="FK_53GP9SMTEMQCUIO8O9T10NARM" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_SIGNAL_MESSAGE"/>

        <addForeignKeyConstraint baseColumnNames="FK_BUSINESSPROCESSES" baseTableName="TB_CONFIGURATION"
                                 constraintName="FK_62DT1Y6O7OD1T0IQN7DOW8UQ5" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_BUSINESS_PROCESS"/>

        <addForeignKeyConstraint baseColumnNames="FK_BUSINESSPROCESS" baseTableName="TB_ACTION"
                                 constraintName="FK_6HLDNNQKMH6LUI555T4N9FJIV" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_BUSINESS_PROCESS"/>

        <addForeignKeyConstraint baseColumnNames="FK_BUSINESSPROCESS" baseTableName="TB_AGREEMENT"
                                 constraintName="FK_70M9KQPQAB3RGK90WSUV9VN64" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_BUSINESS_PROCESS"/>

        <addForeignKeyConstraint baseColumnNames="PARTYMPCMAP_ID_PK" baseTableName="TB_LEG_TB_MPC"
                                 constraintName="FK_7H5NW411791GF4LG1YH6SI1WD" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_MPC"/>

        <addForeignKeyConstraint baseColumnNames="FK_BUSINESSPROCESS" baseTableName="TB_PROCESS"
                                 constraintName="FK_7P1G7SQVLI1SJ6K7VPHJO9IRC" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_BUSINESS_PROCESS"/>

        <addForeignKeyConstraint baseColumnNames="RECEIPT_ID" baseTableName="TB_RECEIPT_DATA"
                                 constraintName="FK_8NCCAE214MVS1KH5SGCJ3Y5OY" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_RECEIPT"/>

        <addForeignKeyConstraint baseColumnNames="FK_CONFIGURATION" baseTableName="TB_MPC"
                                 constraintName="FK_8Q319STWM1NOIJPB3JFL8JRI8" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_CONFIGURATION"/>

        <addForeignKeyConstraint baseColumnNames="FK_SECURITY" baseTableName="TB_LEG"
                                 constraintName="FK_9HPMOEWLITIVCL8RW1JOCCUAU" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_SECURITY"/>

        <addForeignKeyConstraint baseColumnNames="FK_BUSINESSPROCESS" baseTableName="TB_PARTY_ID_TYPE"
                                 constraintName="FK_ADVGUDIX024IRQPUGE4DL9IQF" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_BUSINESS_PROCESS"/>

        <addForeignKeyConstraint baseColumnNames="FK_ALERT" baseTableName="TB_EVENT_ALERT" constraintName="FK_ALERT_ID"
                                 deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_ALERT"/>

        <addForeignKeyConstraint baseColumnNames="FK_PAYLOAD_PROFILE" baseTableName="TB_LEG"
                                 constraintName="FK_AM7BWSM92SE3NVCLBEIEP5VWG" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_PAYLOAD_PROFILE"/>

        <addForeignKeyConstraint baseColumnNames="PARTY_FK" baseTableName="TB_JOIN_PROCESS_INIT_PARTY"
                                 constraintName="FK_ASJDL57BUDMUWMJ3611969JPP" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_PARTY"/>

        <addForeignKeyConstraint baseColumnNames="REV" baseTableName="TB_AUTHENTICATION_ENTRY_AUD"
                                 constraintName="FK_AUTH_ENTRY_AUD_REV" deferrable="false" initiallyDeferred="false"
                                 onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID"
                                 referencedTableName="TB_REV_INFO"/>

        <addForeignKeyConstraint baseColumnNames="REV" baseTableName="TB_BACKEND_FILTER_AUD"
                                 constraintName="FK_BACKEND_FILTER_AUD_REV" deferrable="false" initiallyDeferred="false"
                                 onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID"
                                 referencedTableName="TB_REV_INFO"/>

        <addForeignKeyConstraint baseColumnNames="REV" baseTableName="TB_BACK_RCRITERIA_AUD"
                                 constraintName="FK_BACK_RCRITERIA_AUD" deferrable="false" initiallyDeferred="false"
                                 onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID"
                                 referencedTableName="TB_REV_INFO"/>

        <addForeignKeyConstraint baseColumnNames="MESSAGEINFO_ID_PK" baseTableName="TB_USER_MESSAGE"
                                 constraintName="FK_BE4XC1069QYW2KLHVM3XMG26S" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_MESSAGE_INFO"/>

        <addForeignKeyConstraint baseColumnNames="MESSAGEINFO_ID_PK" baseTableName="TB_SIGNAL_MESSAGE"
                                 constraintName="FK_C08LJJWI4P9DX1RJTCDBE1SFU" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_MESSAGE_INFO"/>

        <addForeignKeyConstraint baseColumnNames="FK_BUSINESSPROCESS" baseTableName="TB_PARTY"
                                 constraintName="FK_CLOYY9K391VHSUP85IWR8IXIV" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_BUSINESS_PROCESS"/>

        <addForeignKeyConstraint baseColumnNames="REV" baseTableName="TB_CONFIGURATION_AUD"
                                 constraintName="FK_CONFIGURATION_AUD_REV" deferrable="false" initiallyDeferred="false"
                                 onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID"
                                 referencedTableName="TB_REV_INFO"/>

        <addForeignKeyConstraint baseColumnNames="REV" baseTableName="TB_CONFIGURATION_RAW_AUD"
                                 constraintName="FK_CONFIGURATION_RAW_AUD" deferrable="false" initiallyDeferred="false"
                                 onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID"
                                 referencedTableName="TB_REV_INFO"/>

        <addForeignKeyConstraint baseColumnNames="PARTPROPERTIES_ID" baseTableName="TB_PROPERTY"
                                 constraintName="FK_CWYLVG6ERNWBA61MO3YAGMKG8" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_PART_INFO"/>

        <addForeignKeyConstraint baseColumnNames="FK_BUSINESSPROCESS" baseTableName="TB_PAYLOAD"
                                 constraintName="FK_D9EL0L8U1GM5OEU67NQRKHERQ" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_BUSINESS_PROCESS"/>

        <addForeignKeyConstraint baseColumnNames="FK_PARTY" baseTableName="TB_PARTY_IDENTIFIER"
                                 constraintName="FK_DESR6XTDP1LP41D5VENLHF4BC" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_PARTY"/>

        <addForeignKeyConstraint baseColumnNames="FK_ACTION" baseTableName="TB_LEG"
                                 constraintName="FK_DGTGTG41YRFEBYYSMKYI1GCAA" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_ACTION"/>

        <addForeignKeyConstraint baseColumnNames="FK_PARTY_ID_TYPE" baseTableName="TB_PARTY_IDENTIFIER"
                                 constraintName="FK_E7EHGHIFRNS83W6V3TPS7VPII" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_PARTY_ID_TYPE"/>

        <addForeignKeyConstraint baseColumnNames="FK_BUSINESSPROCESS" baseTableName="TB_MESSAGE_PROPERTY_SET"
                                 constraintName="FK_EIY3F9AHX0KDX4WXOI6PRYTN9" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_BUSINESS_PROCESS"/>

        <addForeignKeyConstraint baseColumnNames="PROPERTY_FK" baseTableName="TB_JOIN_PROPERTY_SET"
                                 constraintName="FK_EKK8PN89Y50G22KD3GPJA7J39" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_MESSAGE_PROPERTY_SET"/>

        <addForeignKeyConstraint baseColumnNames="FK_BUSINESSPROCESS" baseTableName="TB_MEP"
                                 constraintName="FK_EPMXKH8U7JNW5PBYJ47SIRMLH" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_BUSINESS_PROCESS"/>

        <addForeignKeyConstraint baseColumnNames="FK_EVENT" baseTableName="TB_EVENT_ALERT" constraintName="FK_EVENT_ID"
                                 deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_EVENT"/>

        <addForeignKeyConstraint baseColumnNames="FK_EVENT" baseTableName="TB_EVENT_PROPERTY"
                                 constraintName="FK_EVENT_PROPERTY_ID" deferrable="false" initiallyDeferred="false"
                                 onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID_PK"
                                 referencedTableName="TB_EVENT"/>

        <addForeignKeyConstraint baseColumnNames="FROM_ID" baseTableName="TB_PARTY_ID"
                                 constraintName="FK_FKFTD5ORW2ETIU4GHMN3MHX9I" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_USER_MESSAGE"/>

        <addForeignKeyConstraint baseColumnNames="PROCESS_FK" baseTableName="TB_JOIN_PROCESS_LEG"
                                 constraintName="FK_FPXBDC63GIFACRD4QB6AFRQYW" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_PROCESS"/>

        <addForeignKeyConstraint baseColumnNames="FK_BUSINESSPROCESS" baseTableName="TB_SECURITY"
                                 constraintName="FK_FWRQ81CCTU2NH0QEPRMPVKER9" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_BUSINESS_PROCESS"/>

        <addForeignKeyConstraint baseColumnNames="FK_PROFILE" baseTableName="TB_JOIN_PAYLOAD_PROFILE"
                                 constraintName="FK_G20EOW5F2CKE3AVSRG6QPKUXV" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_PAYLOAD"/>

        <addForeignKeyConstraint baseColumnNames="LEG_FK" baseTableName="TB_JOIN_PROCESS_LEG"
                                 constraintName="FK_GH98Q07KCJL7WDAON9GGIFQUX" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_LEG"/>

        <addForeignKeyConstraint baseColumnNames="PROCESS_FK" baseTableName="TB_JOIN_PROCESS_RESP_PARTY"
                                 constraintName="FK_HLB2Y2PRPM52SSYNN22H3SWSR" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_PROCESS"/>

        <addForeignKeyConstraint baseColumnNames="FK_BACKEND_FILTER" baseTableName="TB_ROUTING_CRITERIA"
                                 constraintName="FK_I7GEI6BDR2CDN61HDOPLXBU7P" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_BACKEND_FILTER"/>

        <addForeignKeyConstraint baseColumnNames="FK_ERROR_HANDLING" baseTableName="TB_LEG"
                                 constraintName="FK_J0Y3FCEDIQX5BUT8JBSCY59KW" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_ERROR_HANDLING"/>

        <addForeignKeyConstraint baseColumnNames="FK_MEP" baseTableName="TB_PROCESS"
                                 constraintName="FK_J7LAB5N5SUKLCLDQHXN8JL2JO" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_MEP"/>

        <addForeignKeyConstraint baseColumnNames="FK_AGREEMENT" baseTableName="TB_PROCESS"
                                 constraintName="FK_KJANLCDEAP7NIRDIGR7RT7P4V" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_AGREEMENT"/>

        <addForeignKeyConstraint baseColumnNames="FK_BUSINESSPROCESS" baseTableName="TB_SERVICE"
                                 constraintName="FK_KKHXS36RW15AYGPN00NVVGYXG" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_BUSINESS_PROCESS"/>

        <addForeignKeyConstraint baseColumnNames="FK_SERVICE" baseTableName="TB_LEG"
                                 constraintName="FK_KV2C5K41APDLVC6I18AR57ABE" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_SERVICE"/>

        <addForeignKeyConstraint baseColumnNames="PARTY_FK" baseTableName="TB_JOIN_PROCESS_RESP_PARTY"
                                 constraintName="FK_KYN19SWM143M96IN317SR97H2" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_PARTY"/>

        <addForeignKeyConstraint baseColumnNames="FK_BUSINESSPROCESS" baseTableName="TB_ERROR_HANDLING"
                                 constraintName="FK_L1MMHS1TBT8PW7VX5TEUYTJVJ" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_BUSINESS_PROCESS"/>

        <addForeignKeyConstraint baseColumnNames="FK_PROPERTY_SET" baseTableName="TB_LEG"
                                 constraintName="FK_LE4RXNKI51EAK6XETC7FQ8SRI" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_MESSAGE_PROPERTY_SET"/>

        <addForeignKeyConstraint baseColumnNames="FK_BUSINESSPROCESS" baseTableName="TB_RELIABILITY"
                                 constraintName="FK_LNNPLHIAWXX7WLT43YE3PEJ00" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_BUSINESS_PROCESS"/>

        <addForeignKeyConstraint baseColumnNames="FK_BUSINESSPROCESS" baseTableName="TB_PAYLOAD_PROFILE"
                                 constraintName="FK_LYNOM7RXKC0T1XFL0NOWXPEUJ" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_BUSINESS_PROCESS"/>

        <addForeignKeyConstraint baseColumnNames="RECEIPT_ID_PK" baseTableName="TB_SIGNAL_MESSAGE"
                                 constraintName="FK_M6UU2Y6G9BUET3O3K1N4QXWEC" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_RECEIPT"/>

        <addForeignKeyConstraint baseColumnNames="SET_FK" baseTableName="TB_JOIN_PROPERTY_SET"
                                 constraintName="FK_MK54XE43F3HOKH7FJL3W66EFK" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_MESSAGE_PROPERTY"/>

        <addForeignKeyConstraint baseColumnNames="FK_MSG_ACKNOWLEDGE" baseTableName="TB_MESSAGE_ACKNW_PROP"
                                 constraintName="FK_MSG_ACK_PROP_MSG_ACK" deferrable="false" initiallyDeferred="false"
                                 onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID_PK"
                                 referencedTableName="TB_MESSAGE_ACKNW"/>

        <addForeignKeyConstraint baseColumnNames="LEGCONFIGURATION_ID_PK" baseTableName="TB_LEG_TB_MPC"
                                 constraintName="FK_NYLCXSY1F9CN3TDSKH97H8PT1" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_LEG"/>

        <addForeignKeyConstraint baseColumnNames="PARTYMPCMAP_KEY" baseTableName="TB_LEG_TB_MPC"
                                 constraintName="FK_ORDDLTV2G3LQ79EU48C2MC2FY" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_PARTY"/>

        <addForeignKeyConstraint baseColumnNames="PROCESS_FK" baseTableName="TB_JOIN_PROCESS_INIT_PARTY"
                                 constraintName="FK_OT8JFKOTD6QU7JRDAPTROHBN8" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_PROCESS"/>

        <addForeignKeyConstraint baseColumnNames="REV" baseTableName="TB_PARTY_AUD" constraintName="FK_PARTY_AUD_REV"
                                 deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID" referencedTableName="TB_REV_INFO"/>

        <addForeignKeyConstraint baseColumnNames="REV" baseTableName="TB_PARTY_IDENTIFIER_AUD"
                                 constraintName="FK_PARTY_IDENTIFIER_AUD_REV" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID" referencedTableName="TB_REV_INFO"/>

        <addForeignKeyConstraint baseColumnNames="REV" baseTableName="TB_PARTY_ID_TYPE_AUD"
                                 constraintName="FK_PARTY_ID_TYPE_AUD_REV" deferrable="false" initiallyDeferred="false"
                                 onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID"
                                 referencedTableName="TB_REV_INFO"/>

        <addForeignKeyConstraint baseColumnNames="USER_ID" baseTableName="TB_PLUGIN_USER_PASSWD_HISTORY"
                                 constraintName="FK_PLUGIN_USER_PASSWD_HISTORY" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_AUTHENTICATION_ENTRY"/>

        <addForeignKeyConstraint baseColumnNames="FK_MPC" baseTableName="TB_LEG"
                                 constraintName="FK_PPVXYURCVFY71FVEJW9BOSGHW" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_MPC"/>

        <addForeignKeyConstraint baseColumnNames="SIGNALMESSAGE_ID" baseTableName="TB_ERROR"
                                 constraintName="FK_PRRCMI4GRM4TXHFSFNFHGQ1K1" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_SIGNAL_MESSAGE"/>

        <addForeignKeyConstraint baseColumnNames="FK_PAYLOAD" baseTableName="TB_JOIN_PAYLOAD_PROFILE"
                                 constraintName="FK_Q0L3EJ6RUQCFUTRU2SECURQ9L" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_PAYLOAD_PROFILE"/>

        <addForeignKeyConstraint baseColumnNames="FK_INITIATOR_ROLE" baseTableName="TB_PROCESS"
                                 constraintName="FK_Q1JFSXFOJ3NL7HII3CO7BU0FR" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_ROLE"/>

        <addForeignKeyConstraint baseColumnNames="FK_PARTY" baseTableName="TB_CONFIGURATION"
                                 constraintName="FK_Q3GAPFC1E7HFBGMO0NEBJ4K1N" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_PARTY"/>

        <addForeignKeyConstraint baseColumnNames="FK_BUSINESSPROCESS" baseTableName="TB_LEG"
                                 constraintName="FK_R2SWPQOF7636VVEQT0DXL89DP" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_BUSINESS_PROCESS"/>

        <addForeignKeyConstraint baseColumnNames="REV" baseTableName="TB_REV_CHANGES"
                                 constraintName="FK_REV_CHANGES_REV" deferrable="false" initiallyDeferred="false"
                                 onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID"
                                 referencedTableName="TB_REV_INFO"/>

        <addForeignKeyConstraint baseColumnNames="FK_BUSINESSPROCESS" baseTableName="TB_MESSAGE_PROPERTY"
                                 constraintName="FK_RJ8H1B65VNJJGYFCJNVSWKGUH" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_BUSINESS_PROCESS"/>

        <addForeignKeyConstraint baseColumnNames="FK_RECEPTION_AWARENESS" baseTableName="TB_LEG"
                                 constraintName="FK_RLBJSTVO4GPDCP6YSV9MOFQXJ" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_RECEPTION_AWARENESS"/>

        <addForeignKeyConstraint baseColumnNames="REV" baseTableName="TB_ROUTING_CRITERIA_AUD"
                                 constraintName="FK_ROUTING_CRITERIA_AUD_REV" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID" referencedTableName="TB_REV_INFO"/>

        <addForeignKeyConstraint baseColumnNames="SIGNALMESSAGE_ID_FK" baseTableName="TB_RAWENVELOPE_LOG"
                                 constraintName="FK_SIGNALMSG_ID_FK_RAWENV_ID" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_SIGNAL_MESSAGE"/>

        <addForeignKeyConstraint baseColumnNames="FK_MEP_BINDING" baseTableName="TB_PROCESS"
                                 constraintName="FK_TP11D8FG7CV1FWF5XKVWQPP34" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_MEP_BINDING"/>

        <addForeignKeyConstraint baseColumnNames="PAYLOADINFO_ID" baseTableName="TB_PART_INFO"
                                 constraintName="FK_TQ6LBN3MP0VSFC6QQU7WXY54G" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_USER_MESSAGE"/>

        <addForeignKeyConstraint baseColumnNames="USERMESSAGE_ID_FK" baseTableName="TB_RAWENVELOPE_LOG"
                                 constraintName="FK_USERMSG_ID_FK_RAWENV_ID" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_USER_MESSAGE"/>

        <addForeignKeyConstraint baseColumnNames="REV" baseTableName="TB_USER_AUD" constraintName="FK_USER_AUD_REV"
                                 deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID" referencedTableName="TB_REV_INFO"/>

        <addForeignKeyConstraint baseColumnNames="USER_ID" baseTableName="TB_USER_PASSWORD_HISTORY"
                                 constraintName="FK_USER_PASSWORD_HISTORY" deferrable="false" initiallyDeferred="false"
                                 onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID_PK"
                                 referencedTableName="TB_USER"/>

        <addForeignKeyConstraint baseColumnNames="USER_ID" baseTableName="TB_USER_ROLES"
                                 constraintName="FK_USER_ROLES_ROLE" deferrable="false" initiallyDeferred="false"
                                 onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID_PK"
                                 referencedTableName="TB_USER"/>

        <addForeignKeyConstraint baseColumnNames="ROLE_ID" baseTableName="TB_USER_ROLES"
                                 constraintName="FK_USER_ROLES_USER" deferrable="false" initiallyDeferred="false"
                                 onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID_PK"
                                 referencedTableName="TB_USER_ROLE"/>

        <addForeignKeyConstraint baseColumnNames="REV" baseTableName="TB_USER_ROLE_AUD"
                                 constraintName="FK_USER_ROLE_AUD" deferrable="false" initiallyDeferred="false"
                                 onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID"
                                 referencedTableName="TB_REV_INFO"/>

        <addForeignKeyConstraint baseColumnNames="TO_ID" baseTableName="TB_PARTY_ID"
                                 constraintName="FK_YLUB8LPTGVSCH02MJ71EUUIL" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_USER_MESSAGE"/>

        <addForeignKeyConstraint baseColumnNames="FK_SPLITTING" baseTableName="TB_LEG" constraintName="UK_LEG_SPLT"
                                 deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_SPLITTING"/>
    </changeSet>

    <!-- views -->
    <changeSet author="Catalin Enache" id="1564477107969-325">
        <comment>create AUDIT views</comment>
        <createView
                replaceIfExists="true"
                viewName="V_AUDIT_DETAIL">
            SELECT
            DISTINCT rc.GROUP_NAME as AUDIT_TYPE ,
            rc.MODIFICATION_TYPE as ACTION_TYPE,
            ri.USER_NAME as USER_NAME ,
            ri.REVISION_DATE as AUDIT_DATE,
            TRIM(CAST(rc.ENTITY_ID AS CHAR(255))) AS ID,
            TRIM(CAST(ri.ID AS CHAR(11))) AS REV_ID
            FROM TB_REV_INFO ri, TB_REV_CHANGES rc
            WHERE ri.ID=rc.REV
            UNION
            SELECT aa.AUDIT_TYPE,aa.MODIFICATION_TYPE,aa.USER_NAME,aa.REVISION_DATE,aa.ENTITY_ID,'1' FROM
            TB_ACTION_AUDIT aa
        </createView>
        <createView
                replaceIfExists="true"
                viewName="V_AUDIT">
            SELECT *
            FROM V_AUDIT_DETAIL VAD
            ORDER BY VAD.AUDIT_DATE DESC;
        </createView>
    </changeSet>
    <changeSet id="EDELIVERY-3361-1" author="CatalinEnache" dbms="oracle">
        <comment>create UI Replication view</comment>
        <createView
                replaceIfExists="true"
                viewName="V_MESSAGE_UI_DIFF">
            SELECT
            message_id,
            message_status,
            notification_status,
            msh_role,
            message_type,
            deleted,
            received,
            send_attempts,
            send_attempts_max,
            next_attempt,
            conversation_id,
            from_id,
            to_id,
            from_scheme,
            to_scheme,
            ref_to_message_id,
            failed,
            restored,
            message_subtype
            FROM
            (
            SELECT
            message_log.message_id,
            message_log.message_status,
            message_log.notification_status,
            message_log.msh_role,
            message_log.message_type,
            message_log.deleted,
            message_log.received,
            message_log.send_attempts,
            message_log.send_attempts_max,
            message_log.next_attempt,
            user_message.coll_info_convers_id AS conversation_id,
            partyid5_.value AS from_id,
            partyid6_.value AS to_id,
            property.value AS from_scheme,
            property2.value AS to_scheme,
            message_info.ref_to_message_id,
            message_log.failed,
            message_log.restored,
            message_log.message_subtype
            FROM
            tb_message_log message_log
            LEFT OUTER JOIN tb_message_info message_info ON message_log.message_id = message_info.message_id,tb_user_message user_message
            LEFT OUTER JOIN tb_property property ON user_message.id_pk = property.messageproperties_id
            LEFT OUTER JOIN tb_property property2 ON user_message.id_pk = property2.messageproperties_id
            LEFT OUTER JOIN tb_party_id partyid5_ ON user_message.id_pk = partyid5_.from_id
            LEFT OUTER JOIN tb_party_id partyid6_ ON user_message.id_pk = partyid6_.to_id
            WHERE
            user_message.messageinfo_id_pk = message_info.id_pk
            AND property.name = 'originalSender'
            AND property2.name = 'finalRecipient'
            UNION
            SELECT
            message_log.message_id,
            message_log.message_status,
            message_log.notification_status,
            message_log.msh_role,
            message_log.message_type,
            message_log.deleted,
            message_log.received,
            message_log.send_attempts,
            message_log.send_attempts_max,
            message_log.next_attempt,
            '' AS conversation_id,
            partyid7_.value AS from_id,
            partyid8_.value AS to_id,
            property.value AS from_scheme,
            property2.value AS to_scheme,
            message_info.ref_to_message_id,
            message_log.failed,
            message_log.restored,
            message_log.message_subtype
            FROM
            tb_message_log message_log
            CROSS JOIN tb_messaging messaging
            INNER JOIN tb_signal_message signalmess2_ ON messaging.signal_message_id = signalmess2_.id_pk
            LEFT OUTER JOIN tb_message_info message_info ON signalmess2_.messageinfo_id_pk = message_info.id_pk
            INNER JOIN tb_user_message user_message ON messaging.user_message_id = user_message.id_pk
            LEFT OUTER JOIN tb_property property ON user_message.id_pk = property.messageproperties_id
            LEFT OUTER JOIN tb_property property2 ON user_message.id_pk = property2.messageproperties_id
            LEFT OUTER JOIN tb_party_id partyid7_ ON user_message.id_pk = partyid7_.from_id
            LEFT OUTER JOIN tb_party_id partyid8_ ON user_message.id_pk = partyid8_.to_id
            CROSS JOIN tb_message_info message_info2
            WHERE
            user_message.messageinfo_id_pk = message_info2.id_pk
            AND message_info.message_id = message_log.message_id
            AND message_info.ref_to_message_id = message_info2.message_id
            AND property.name = 'originalSender'
            AND property2.name = 'finalRecipient'
            ) result WHERE result.received BETWEEN systimestamp - INTERVAL '48' HOUR AND systimestamp + INTERVAL '1' HOUR
            MINUS
            SELECT
            message_id,
            message_status,
            notification_status,
            msh_role,
            message_type,
            deleted,
            received,
            send_attempts,
            send_attempts_max,
            next_attempt,
            conversation_id,
            from_id,
            to_id,
            from_scheme,
            to_scheme,
            ref_to_message_id,
            failed,
            restored,
            message_subtype
            FROM
            TB_MESSAGE_UI WHERE
            received BETWEEN systimestamp - INTERVAL '48' HOUR AND systimestamp + INTERVAL '1' HOUR
        </createView>
    </changeSet>
    <changeSet id="EDELIVERY-3361-2" author="CatalinEnache" dbms="mysql">
        <createView
                replaceIfExists="true"
                viewName="V_MESSAGE_UI_DIFF">
            SELECT
            message_log.MESSAGE_ID,
            message_log.MESSAGE_STATUS,
            message_log.NOTIFICATION_STATUS,
            message_log.MSH_ROLE,
            message_log.MESSAGE_TYPE,
            message_log.DELETED,
            message_log.RECEIVED,
            message_log.SEND_ATTEMPTS,
            message_log.SEND_ATTEMPTS_MAX,
            message_log.NEXT_ATTEMPT,
            user_message.COLL_INFO_CONVERS_ID AS CONVERSATION_ID,
            partyid5_.VALUE AS FROM_ID,
            partyid6_.VALUE AS TO_ID,
            property3_.VALUE AS FROM_SCHEME,
            property4_.VALUE AS TO_SCHEME,
            message_info.REF_TO_MESSAGE_ID,
            message_log.FAILED,
            message_log.RESTORED,
            message_log.MESSAGE_SUBTYPE
            FROM
            TB_MESSAGE_LOG message_log
            LEFT OUTER JOIN TB_MESSAGE_INFO message_info ON message_log.MESSAGE_ID = message_info.MESSAGE_ID
            CROSS JOIN TB_USER_MESSAGE user_message
            LEFT OUTER JOIN TB_PROPERTY property3_ ON user_message.ID_PK = property3_.MESSAGEPROPERTIES_ID
            LEFT OUTER JOIN TB_PROPERTY property4_ ON user_message.ID_PK = property4_.MESSAGEPROPERTIES_ID
            LEFT OUTER JOIN TB_PARTY_ID partyid5_ ON user_message.ID_PK = partyid5_.FROM_ID
            LEFT OUTER JOIN TB_PARTY_ID partyid6_ ON user_message.ID_PK = partyid6_.TO_ID

            LEFT JOIN TB_MESSAGE_UI flat_table ON message_log.message_id &lt;=&gt; flat_table.message_id
            AND message_log.message_Status &lt;=&gt; flat_table.message_status
            AND message_log.NOTIFICATION_STATUS &lt;=&gt; flat_table.NOTIFICATION_STATUS
            AND message_log.MSH_ROLE &lt;=&gt; flat_table.MSH_ROLE
            AND message_log.MESSAGE_TYPE &lt;=&gt; flat_table.MESSAGE_TYPE
            AND message_log.DELETED &lt;=&gt; flat_table.DELETED
            AND message_log.RECEIVED &lt;=&gt; flat_table.RECEIVED
            AND message_log.SEND_ATTEMPTS &lt;=&gt; flat_table.SEND_ATTEMPTS
            AND message_log.SEND_ATTEMPTS_MAX &lt;=&gt; flat_table.SEND_ATTEMPTS_MAX
            AND message_log.NEXT_ATTEMPT &lt;=&gt; flat_table.NEXT_ATTEMPT
            AND user_message.COLL_INFO_CONVERS_ID &lt;=&gt; flat_table.CONVERSATION_ID
            AND partyid5_.VALUE &lt;=&gt; flat_table.FROM_ID
            AND partyid6_.VALUE &lt;=&gt; flat_table.TO_ID
            AND property3_.VALUE &lt;=&gt; flat_table.FROM_SCHEME
            AND property4_.VALUE &lt;=&gt; flat_table.TO_SCHEME
            AND message_info.REF_TO_MESSAGE_ID &lt;=&gt; flat_table.REF_TO_MESSAGE_ID
            AND message_log.FAILED &lt;=&gt; flat_table.FAILED
            AND message_log.RESTORED &lt;=&gt; flat_table.RESTORED
            AND message_log.MESSAGE_SUBTYPE &lt;=&gt; flat_table.MESSAGE_SUBTYPE
            WHERE
            user_message.messageInfo_ID_PK = message_info.ID_PK
            AND property3_.NAME = 'originalSender'
            AND property4_.NAME = 'finalRecipient'
            AND message_log.received BETWEEN DATE_SUB(NOW(), INTERVAL 48 HOUR) AND DATE_ADD(NOW(), INTERVAL 1 HOUR)
            AND flat_table.message_id IS NULL

            UNION

            SELECT
            message_log.MESSAGE_ID,
            message_log.MESSAGE_STATUS,
            message_log.NOTIFICATION_STATUS,
            message_log.MSH_ROLE,
            message_log.MESSAGE_TYPE,
            message_log.DELETED,
            message_log.RECEIVED,
            message_log.SEND_ATTEMPTS,
            message_log.SEND_ATTEMPTS_MAX,
            message_log.NEXT_ATTEMPT,
            '' AS CONVERSATION_ID,
            partyid7_.VALUE AS FROM_ID,
            partyid8_.VALUE AS TO_ID,
            property5_.VALUE AS FROM_SCHEME,
            property6_.VALUE AS TO_SCHEME,
            messageinf4_.REF_TO_MESSAGE_ID,
            message_log.FAILED,
            message_log.RESTORED,
            message_log.MESSAGE_SUBTYPE
            FROM
            TB_MESSAGE_LOG message_log
            CROSS JOIN TB_MESSAGING messaging
            INNER JOIN TB_SIGNAL_MESSAGE signalmess2_ ON messaging.SIGNAL_MESSAGE_ID = signalmess2_.ID_PK
            LEFT OUTER JOIN TB_MESSAGE_INFO messageinf4_ ON signalmess2_.messageInfo_ID_PK = messageinf4_.ID_PK
            INNER JOIN TB_USER_MESSAGE usermessag3_ ON messaging.USER_MESSAGE_ID = usermessag3_.ID_PK
            LEFT OUTER JOIN TB_PROPERTY property5_ ON usermessag3_.ID_PK = property5_.MESSAGEPROPERTIES_ID
            LEFT OUTER JOIN TB_PROPERTY property6_ ON usermessag3_.ID_PK = property6_.MESSAGEPROPERTIES_ID
            LEFT OUTER JOIN TB_PARTY_ID partyid7_ ON usermessag3_.ID_PK = partyid7_.FROM_ID
            LEFT OUTER JOIN TB_PARTY_ID partyid8_ ON usermessag3_.ID_PK = partyid8_.TO_ID
            CROSS JOIN TB_MESSAGE_INFO messageinf11_

            LEFT JOIN TB_MESSAGE_UI flat_table ON message_log.message_id &lt;=&gt; flat_table.message_id
            AND message_log.message_Status &lt;=&gt; flat_table.message_status
            AND message_log.NOTIFICATION_STATUS &lt;=&gt; flat_table.NOTIFICATION_STATUS
            AND message_log.MSH_ROLE &lt;=&gt; flat_table.MSH_ROLE
            AND message_log.MESSAGE_TYPE &lt;=&gt; flat_table.MESSAGE_TYPE
            AND message_log.DELETED &lt;=&gt; flat_table.DELETED
            AND message_log.RECEIVED &lt;=&gt; flat_table.RECEIVED
            AND message_log.SEND_ATTEMPTS &lt;=&gt; flat_table.SEND_ATTEMPTS
            AND message_log.SEND_ATTEMPTS_MAX &lt;=&gt; flat_table.SEND_ATTEMPTS_MAX
            AND message_log.NEXT_ATTEMPT &lt;=&gt; flat_table.NEXT_ATTEMPT
            AND '' &lt;=&gt; flat_table.CONVERSATION_ID
            AND partyid7_.VALUE &lt;=&gt; flat_table.FROM_ID
            AND partyid8_.VALUE &lt;=&gt; flat_table.TO_ID
            AND property5_.VALUE &lt;=&gt; flat_table.FROM_SCHEME
            AND property6_.VALUE &lt;=&gt; flat_table.TO_SCHEME
            AND messageinf4_.REF_TO_MESSAGE_ID &lt;=&gt; flat_table.REF_TO_MESSAGE_ID
            AND message_log.FAILED &lt;=&gt; flat_table.FAILED
            AND message_log.RESTORED &lt;=&gt; flat_table.RESTORED
            AND message_log.MESSAGE_SUBTYPE &lt;=&gt; flat_table.MESSAGE_SUBTYPE
            WHERE
            usermessag3_.messageInfo_ID_PK = messageinf11_.ID_PK
            AND messageinf4_.MESSAGE_ID = message_log.MESSAGE_ID
            AND messageinf4_.REF_TO_MESSAGE_ID = messageinf11_.MESSAGE_ID
            AND property5_.NAME = 'originalSender'
            AND property6_.NAME = 'finalRecipient'
            AND message_log.received BETWEEN DATE_SUB(NOW(), INTERVAL 48 HOUR) AND DATE_ADD(NOW(), INTERVAL 1 HOUR)
            AND flat_table.message_id IS NULL;
        </createView>
    </changeSet>

    <!-- inserts -->
    <changeSet author="thomas dussart" id="EDELIVERY-2144_1">
        <insert tableName="TB_USER_ROLE">
            <column name="ID_PK" value="1" type="INT"/>
            <column name="ROLE_NAME" value="ROLE_ADMIN"/>
        </insert>
        <insert tableName="TB_USER_ROLE">
            <column name="ID_PK" value="2" type="INT"/>
            <column name="ROLE_NAME" value="ROLE_USER"/>
        </insert>
    </changeSet>
</databaseChangeLog>
