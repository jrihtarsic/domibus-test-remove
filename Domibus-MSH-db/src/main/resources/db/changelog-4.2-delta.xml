<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">

    <!-- properties - to be used in column definitions -->
    <property name="now" value="sysdate" dbms="oracle"/>
    <property name="now" value="now()" dbms="mysql"/>
    <property name="current_db_user" value="user" dbms="oracle"/>
    <!-- MySQL cannot handle functions as DEFAULT values and the alternative would be to add a trigger for all these
    tables. Either way this value will most probably never be used since a value will always be provided at runtime.-->
    <property name="current_db_user" value="'DOMIBUS'" dbms="mysql"/>

    <changeSet author="idragusa" id="EDELIVERY-4740">
        <comment>Plugin specific tables</comment>
        <createTable tableName="WS_PLUGIN_TB_MESSAGE_LOG">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_WS_PLUGIN_TB_MESSAGE_LOG"/>
            </column>
            <column name="MESSAGE_ID" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="FINAL_RECIPIENT" type="VARCHAR(255)"/>
            <column name="RECEIVED" type="TIMESTAMP" defaultValueComputed="${now}">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet author="tincuse" id="EDELIVERY-4915">
        <comment>Add audit columns in all configuration and run-time tables</comment>

        <addColumn tableName="TB_ACTION">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_ACTION_AUDIT">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_AGREEMENT">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addNotNullConstraint tableName="TB_ALERT" columnName="CREATION_TIME" columnDataType="TIMESTAMP" defaultNullValue="${now}" />
        <addColumn tableName="TB_ALERT">
            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_AUTHENTICATION_ENTRY">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_BACKEND_FILTER">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_BUSINESS_PROCESS">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_CERTIFICATE">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addNotNullConstraint tableName="TB_COMMAND" columnName="CREATION_TIME" columnDataType="TIMESTAMP" defaultNullValue="${now}" />
        <addColumn tableName="TB_COMMAND">
            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_COMMAND_PROPERTY">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_CONFIGURATION">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_CONFIGURATION_RAW">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_ENCRYPTION_KEY">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_ERROR">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_ERROR_HANDLING">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_ERROR_LOG">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_EVENT">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_EVENT_ALERT">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_EVENT_PROPERTY">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_JOIN_PAYLOAD_PROFILE">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_JOIN_PROCESS_INIT_PARTY">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_JOIN_PROCESS_LEG">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_JOIN_PROCESS_RESP_PARTY">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_JOIN_PROPERTY_SET">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_LEG">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_LEG_TB_MPC">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_MEP">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_MEP_BINDING">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_MESSAGE_ACKNW">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_MESSAGE_ACKNW_PROP">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_MESSAGE_FRAGMENT">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_MESSAGE_GROUP">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_MESSAGE_HEADER">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_MESSAGE_INFO">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addNotNullConstraint tableName="TB_MESSAGE_LOG" columnName="CREATED_BY" columnDataType="VARCHAR(255)" defaultNullValue="${current_db_user}" />
        <addColumn tableName="TB_MESSAGE_LOG">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_MESSAGE_PROPERTY">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_MESSAGE_PROPERTY_SET">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_MESSAGE_UI">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_MESSAGING">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_MESSAGING_LOCK">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_MPC">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_PARTY">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_PARTY_ID">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_PARTY_IDENTIFIER">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_PARTY_ID_TYPE">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_PART_INFO">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_PAYLOAD">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_PAYLOAD_PROFILE">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_PLUGIN_USER_PASSWD_HISTORY">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_PROCESS">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_PROPERTY">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_RAWENVELOPE_LOG">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_RECEIPT">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_RECEIPT_DATA">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_RECEPTION_AWARENESS">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_RELIABILITY">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_REV_CHANGES">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_ROLE">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_ROUTING_CRITERIA">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_SECURITY">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_SEND_ATTEMPT">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_SERVICE">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_SIGNAL_MESSAGE">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_SPLITTING">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_USER">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_USER_MESSAGE">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_USER_PASSWORD_HISTORY">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_USER_ROLE">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_USER_ROLES">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>
    </changeSet>
    <changeSet author="Cosmin Baciu" id="EDELIVERY-6391" dbms="oracle">
        <alterSequence sequenceName="HIBERNATE_SEQUENCE"
                       cacheSize="100"
        />
    </changeSet>

    <changeSet author="Sebastian-Ion TINCU" id="EDELIVERY-6595-2">
        <modifyDataType columnName="END_DATE" newDataType="DATETIME" tableName="TB_SEND_ATTEMPT" />
        <modifyDataType columnName="START_DATE" newDataType="DATETIME" tableName="TB_SEND_ATTEMPT" />
        <addNotNullConstraint columnDataType="DATETIME" columnName="END_DATE" tableName="TB_SEND_ATTEMPT" />
        <addNotNullConstraint columnDataType="DATETIME" columnName="START_DATE" tableName="TB_SEND_ATTEMPT" />

        <modifyDataType columnName="NOT_VALID_BEFORE_DATE" newDataType="DATETIME" tableName="TB_CERTIFICATE" />
        <modifyDataType columnName="NOT_VALID_AFTER_DATE" newDataType="DATETIME" tableName="TB_CERTIFICATE" />

        <addColumn tableName="TB_MESSAGE_LOG">
            <column name="VERSION" remarks="Used for optimistic locking mechanism" type="INT" defaultValueNumeric="0"/>
        </addColumn>

        <createView
                replaceIfExists="true"
                viewName="V_AUDIT_DETAIL">
            SELECT
            DISTINCT rc.GROUP_NAME as AUDIT_TYPE,
            rc.MODIFICATION_TYPE as ACTION_TYPE,
            ri.USER_NAME as USER_NAME,
            ri.REVISION_DATE as AUDIT_DATE,
            TRIM(CAST(rc.ENTITY_ID AS CHAR(255))) AS ID,
            TRIM(CAST(ri.ID AS CHAR(19))) AS REV_ID
            FROM TB_REV_INFO ri, TB_REV_CHANGES rc
            WHERE ri.ID=rc.REV
            UNION
            SELECT aa.AUDIT_TYPE,aa.MODIFICATION_TYPE,aa.USER_NAME,aa.REVISION_DATE,aa.ENTITY_ID,'1' FROM
            TB_ACTION_AUDIT aa
        </createView>

        <createView
                replaceIfExists="true"
                viewName="V_AUDIT">
            SELECT *
            FROM V_AUDIT_DETAIL VAD
            ORDER BY VAD.AUDIT_DATE DESC;
        </createView>
    </changeSet>

    <changeSet author="Catalin Enache" id="EDELIVERY-6601">
        <modifyDataType columnName="MAX_SIZE" newDataType="BIGINT" tableName="TB_PAYLOAD_PROFILE" />
    </changeSet>

    <changeSet author="Catalin Enache" id="EDELIVERY-6921">
        <comment>rename PMode associated tables</comment>
        <renameTable oldTableName="TB_ACTION" newTableName="TB_PM_ACTION"/>
        <renameTable oldTableName="TB_ACTION_AUDIT" newTableName="TB_PM_ACTION_AUDIT"/>
        <renameTable oldTableName="TB_AGREEMENT" newTableName="TB_PM_AGREEMENT"/>
        <renameTable oldTableName="TB_BUSINESS_PROCESS" newTableName="TB_PM_BUSINESS_PROCESS"/>
        <renameTable oldTableName="TB_CONFIGURATION" newTableName="TB_PM_CONFIGURATION"/>
        <renameTable oldTableName="TB_CONFIGURATION_AUD" newTableName="TB_PM_CONFIGURATION_AUD"/>
        <renameTable oldTableName="TB_CONFIGURATION_RAW" newTableName="TB_PM_CONFIGURATION_RAW"/>
        <renameTable oldTableName="TB_CONFIGURATION_RAW_AUD" newTableName="TB_PM_CONFIGURATION_RAW_AUD"/>
        <renameTable oldTableName="TB_ERROR_HANDLING" newTableName="TB_PM_ERROR_HANDLING"/>
        <renameTable oldTableName="TB_JOIN_PAYLOAD_PROFILE" newTableName="TB_PM_JOIN_PAYLOAD_PROFILE"/>
        <renameTable oldTableName="TB_JOIN_PROCESS_INIT_PARTY" newTableName="TB_PM_JOIN_PROCESS_INIT_PARTY"/>
        <renameTable oldTableName="TB_JOIN_PROCESS_LEG" newTableName="TB_PM_JOIN_PROCESS_LEG"/>
        <renameTable oldTableName="TB_JOIN_PROCESS_RESP_PARTY" newTableName="TB_PM_JOIN_PROCESS_RESP_PARTY"/>
        <renameTable oldTableName="TB_JOIN_PROPERTY_SET" newTableName="TB_PM_JOIN_PROPERTY_SET"/>
        <renameTable oldTableName="TB_LEG" newTableName="TB_PM_LEG"/>
        <renameTable oldTableName="TB_MPC" newTableName="TB_PM_MPC"/>
        <renameTable oldTableName="TB_LEG_TB_MPC" newTableName="TB_PM_LEG_MPC"/>
        <renameTable oldTableName="TB_MEP" newTableName="TB_PM_MEP"/>
        <renameTable oldTableName="TB_MEP_BINDING" newTableName="TB_PM_MEP_BINDING"/>
        <renameTable oldTableName="TB_MESSAGE_PROPERTY" newTableName="TB_PM_MESSAGE_PROPERTY"/>
        <renameTable oldTableName="TB_MESSAGE_PROPERTY_SET" newTableName="TB_PM_MESSAGE_PROPERTY_SET"/>
        <renameTable oldTableName="TB_PARTY" newTableName="TB_PM_PARTY"/>
        <renameTable oldTableName="TB_PARTY_AUD" newTableName="TB_PM_PARTY_AUD"/>
        <renameTable oldTableName="TB_PARTY_IDENTIFIER" newTableName="TB_PM_PARTY_IDENTIFIER"/>
        <renameTable oldTableName="TB_PARTY_IDENTIFIER_AUD" newTableName="TB_PM_PARTY_IDENTIFIER_AUD"/>
        <renameTable oldTableName="TB_PARTY_ID_TYPE" newTableName="TB_PM_PARTY_ID_TYPE"/>
        <renameTable oldTableName="TB_PARTY_ID_TYPE_AUD" newTableName="TB_PM_PARTY_ID_TYPE_AUD"/>
        <renameTable oldTableName="TB_PAYLOAD" newTableName="TB_PM_PAYLOAD"/>
        <renameTable oldTableName="TB_PAYLOAD_PROFILE" newTableName="TB_PM_PAYLOAD_PROFILE"/>
        <renameTable oldTableName="TB_PROCESS" newTableName="TB_PM_PROCESS"/>
        <renameTable oldTableName="TB_RECEPTION_AWARENESS" newTableName="TB_PM_RECEPTION_AWARENESS"/>
        <renameTable oldTableName="TB_RELIABILITY" newTableName="TB_PM_RELIABILITY"/>
        <renameTable oldTableName="TB_SECURITY" newTableName="TB_PM_SECURITY"/>
        <renameTable oldTableName="TB_SERVICE" newTableName="TB_PM_SERVICE"/>
        <renameTable oldTableName="TB_ROLE" newTableName="TB_PM_ROLE"/>
        <renameTable oldTableName="TB_SPLITTING" newTableName="TB_PM_SPLITTING"/>

        <createView
                replaceIfExists="true"
                viewName="V_AUDIT_DETAIL">
            SELECT
            DISTINCT rc.GROUP_NAME as AUDIT_TYPE ,
            rc.MODIFICATION_TYPE as ACTION_TYPE,
            ri.USER_NAME as USER_NAME ,
            ri.REVISION_DATE as AUDIT_DATE,
            TRIM(CAST(rc.ENTITY_ID AS CHAR(255))) AS ID,
            TRIM(CAST(ri.ID AS CHAR(19))) AS REV_ID
            FROM TB_REV_INFO ri, TB_REV_CHANGES rc
            WHERE ri.ID=rc.REV
            UNION
            SELECT aa.AUDIT_TYPE,aa.MODIFICATION_TYPE,aa.USER_NAME,aa.REVISION_DATE,aa.ENTITY_ID,'1' FROM
            TB_PM_ACTION_AUDIT aa
        </createView>
    </changeSet>
</databaseChangeLog>